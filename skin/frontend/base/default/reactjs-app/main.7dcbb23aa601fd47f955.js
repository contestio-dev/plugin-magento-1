(()=>{"use strict";var e,t,a,r={7509:(e,t,a)=>{var r=a(96540),n=a(5338),l=a(84976),s=a(47767),o=a(64721),c=a(85902);const i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=await fetch(`http://127.0.0.1/index.php/contestio/api/proxy?endpoint=${e}`,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return 201===r.status||r.json()},m=(0,r.createContext)(void 0);function d(e){let{children:t}=e;const[a,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)([]),[o,c]=(0,r.useState)({id:"8",firstName:"ppp",pseudo:"pouiass"}),[d,u]=(0,r.useState)(!0),[p,f]=(0,r.useState)([]),[g,h]=(0,r.useState)(!0),[v,b]=(0,r.useState)(null),[w,E]=(0,r.useState)(0);(0,r.useEffect)((()=>{console.log("Context mounted"),R()}),[]);const R=async()=>{try{const e=await i("v1/org/header");s(e.buttons||[]);const t=e.user||null;null!==t.pseudo&&t.pseudo,Object.values(t).every((e=>null===e||""===e))}catch(e){console.error(e)}finally{n(!1)}};return React.createElement(m.Provider,{value:{counter:w,setCounter:E,incrementCounter:()=>E(w+1),decrementCounter:()=>E(w-1),navButtons:l,user:o,setUser:c,appLoading:a,homepageLoading:d,homepageContent:p,setHomepageLoading:u,setHomepageContent:f,contestsLoading:g,contestsContent:v,setContestsLoading:h,setContestsContent:b}},t)}function u(){const e=(0,r.useContext)(m);if(void 0===e)throw new Error("useAppContext doit √™tre utilis√© √† l'int√©rieur d'un AppProvider");return e}var p=a(34164),f=a(50856);function g(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.QP)((0,p.$)(t))}var h=a(33362),v=a(80097);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},b.apply(null,arguments)}const w=(0,v.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-contestio-purple text-white hover:bg-contestio-purple/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 active:bg-destructive/60",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"text-contestio-purple text-md font-medium hover:bg-contestio-purple/10","ghost-destructive":"text-destructive text-md font-medium hover:bg-destructive/10",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=r.forwardRef(((e,t)=>{let{className:a,variant:n,size:l,asChild:s=!1,...o}=e;const c=s?h.DX:"button";return r.createElement(c,b({className:g(w({variant:n,size:l,className:a})),ref:t},o))}));function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(null,arguments)}function x(e){let{className:t,...a}=e;return React.createElement("div",R({className:g("animate-pulse rounded-md bg-muted",t)},a))}E.displayName="Button";var N=a(35847);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},y.apply(null,arguments)}const C=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(N.bL,y({ref:t,className:g("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a)},n))}));C.displayName=N.bL.displayName;const k=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(N._V,y({ref:t,className:g("aspect-square h-full w-full",a)},n))}));k.displayName=N._V.displayName;const j=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(N.H4,y({ref:t,className:g("flex h-full w-full items-center justify-center rounded-full bg-muted",a)},n))}));j.displayName=N.H4.displayName;var O=a(69067);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},S.apply(null,arguments)}const P=O.Kq,A=O.bL,L=O.l9,_=r.forwardRef(((e,t)=>{let{className:a,sideOffset:n=4,...l}=e;return r.createElement(O.UC,S({ref:t,sideOffset:n,className:g("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a)},l))}));_.displayName=O.UC.displayName;const M=function(){const{appLoading:e,user:t,setUser:a,navButtons:r}=u(),n=(0,s.Zp)(),l=window.location.pathname.split("/").pop(),o="/"===l||""===l||"contestio"===l,c="contests"===l,i="surveys"===l;return React.createElement("header",{className:"w-full flex flex-col"},React.createElement("div",{className:g("relative flex flex-col gap-5 h-80 w-full bg-cover bg-center",'bg-[url("https://images.pexels.com/photos/270756/pexels-photo-270756.jpeg?cs=srgb&dl=pexels-pixabay-270756.jpg&fm=jpg")]')},React.createElement("div",{className:"bg-gradient-to-br from-black/10 to-black/50 w-full h-full"}),React.createElement("h1",{className:"text-white text-4xl leading-tight font-bold absolute top-4 right-4 w-1/4 drop-shadow-md whitespace-nowrap"},"Bienvenue au ",React.createElement("br",null)," club Cabesto !"),React.createElement("p",{className:"text-white uppercase leading-relaxed font-semibold absolute bottom-8 left-0 right-0 w-full px-8 text-left drop-shadow-md"},"Retrouvez-ici les derni√®res actualit√©s de Cabesto, participe aux √©v√®nements uniques que nous organisons et tente de remporter des lots ou des bons d'achats √† faire valoir dans tous nos magasins !!")),React.createElement("nav",{className:"flex justify-between items-center gap-5 border-b border-gray-200 px-16 shadow-md"},React.createElement("div",{className:"flex items-center gap-5 pt-4"},e&&React.createElement(React.Fragment,null,React.createElement(x,{className:"h-[20px] w-[100px] rounded-xl mb-4"}),React.createElement(x,{className:"h-[20px] w-[100px] rounded-xl mb-4"})),r.map((e=>(e=>{const t="contest"===e.navUrl?c:"survey"===e.navUrl?i:o;return React.createElement(E,{key:e.slug,id:e.slug,onClick:()=>{return t=e.navUrl||"",void n("contest"===t?"/contests":"survey"===t?"/surveys":"/");var t},className:g("bg-white text-contestio-purple font-bold border-0 rounded-none border-b-2 pb-5 border-transparent","hover:border-contestio-purple/50 hover:bg-white hover:text-contestio-purple/70","active:border-contestio-purple/80 active:text-contestio-purple/80",t&&"border-contestio-purple hover:border-contestio-purple hover:bg-white hover:text-contestio-purple")},e.text)})(e)))),t&&t.pseudo&&React.createElement(A,null,React.createElement(L,{asChild:!0},React.createElement(E,{variant:"ghost",onClick:()=>n("/profile"),className:g("flex justify-end items-center gap-2 border border-border/70 rounded-md px-2 py-1 shadow","cursor-pointer hover:border-border hover:shadow-md hover:bg-white")},React.createElement("span",{className:"text-md font-normal text-contestio-purple"},t.pseudo),React.createElement(C,{className:"w-7 h-7"},React.createElement(k,{src:t.avatar}),React.createElement(j,{className:"text-muted-foreground font-medium text-sm"},(t.firstName+" "+t.pseudo).split(" ").filter((e=>""!==e)).map((e=>e[0])).join(""))))),React.createElement(_,{className:"bg-white text-black"},React.createElement("p",null,"Voir mon profil")))))};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},z.apply(null,arguments)}const T=function(e){return React.createElement("a",z({},e,{className:g("text-muted-foreground border-b border-b-transparent no-underline","hover:no-underline hover:border-b-contestio-purple hover:text-contestio-purple transition-all duration-300",e.className)}))},$=function(){const e=`https://contestio.fr/report-bug?url=${window.location.href}&version=0.1.0`;return React.createElement("footer",{className:"w-full my-0 flex justify-end items-center"},React.createElement("div",{className:"flex items-center gap-2 text-sm text-muted-foreground"},React.createElement(T,{href:e,target:"_blank"},"Signaler un bug"),React.createElement("span",{className:"border-b border-b-transparent"},"-"),React.createElement("span",{className:"font-light border-b border-b-transparent"},"Powered by"),React.createElement(T,{href:"https://contestio.fr",target:"_blank"},"Contestio"),React.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/logo.png",alt:"Contestio",height:20,width:20})))};var F=a(14476),U=a(70893),q=a(49785);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},B.apply(null,arguments)}const I=r.forwardRef(((e,t)=>{let{className:a,type:n,...l}=e;return r.createElement("input",B({type:n,className:g("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-contestio-purple/20 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t},l))}));I.displayName="Input";var V=a(95920);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},H.apply(null,arguments)}const D=(0,v.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(V.b,H({ref:t,className:g(D(),a)},n))}));J.displayName=V.b.displayName;var Z=a(24082);const G=e=>{let{icon:t,filledRed:a,fill:r,className:n}=e;const l=(0,Z.A)(t);return React.createElement("span",{dangerouslySetInnerHTML:{__html:l.outerHTML},className:g("[&_svg]:w-full [&_svg]:h-full",a?"[&_svg]:fill-red-500":r&&`[&_svg]:fill-${r}`,n)})};var K=a(25191),W=a(40961);const Y=e=>{let{isOpen:t,isClosing:a,children:n,className:l}=e;return t?(0,W.createPortal)(r.createElement("div",{className:"absolute inset-0 z-10","data-contestio-modal":t?"open":"closed"},r.createElement("div",{className:"absolute inset-0 flex items-center justify-center z-50 backdrop-blur"},r.createElement("div",{className:"absolute inset-0 bg-white/60"}),r.createElement("div",{className:g("relative bg-white min-w-[400px] p-10 rounded-xl z-10 border border-border shadow-xl",a?"animate-fade-out":"animate-fade-in",l)},n))),document.getElementById("contestio-layout")):null},Q=e=>{let{onClick:t}=e;return r.createElement("div",{className:"absolute top-4 right-4"},r.createElement(E,{onClick:t,variant:"ghost",className:"size-10 p-0"},G({icon:K.A,className:"size-6"})))},X=e=>{let{children:t,onClose:a}=e;return r.createElement("div",{className:"flex flex-row justify-between items-center mb-5"},r.createElement("h2",{className:"text-black text-xl font-bold"},t),r.createElement(E,{onClick:a,variant:"ghost",className:"size-10 p-0"},G({icon:K.A,className:"size-6"})))},ee=e=>{let{className:t,children:a}=e;return r.createElement("div",{className:g("w-full flex flex-row justify-end gap-5 mt-5",t)},a)};var te=a(28710),ae=a(65550);function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},re.apply(null,arguments)}const ne=(0,r.forwardRef)(((e,t)=>{let{className:a,...n}=e;const[l,s]=(0,r.useState)(!1);return""===n.value||void 0===n.value||n.disabled,React.createElement("div",{className:"relative flex items-center"},React.createElement(I,re({type:l?"text":"password",className:g("hide-password-toggle pr-10",a),ref:t},n)),React.createElement(E,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-[0] h-full px-3 py-2 hover:bg-transparent",onClick:()=>s((e=>!e))},G({icon:l?te.A:ae.A,className:"h-4 w-4"})),React.createElement("style",null,"\n\t\t\t\t\t.hide-password-toggle::-ms-reveal,\n\t\t\t\t\t.hide-password-toggle::-ms-clear {\n\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n          "))}));ne.displayName="PasswordInput";var le=a(9013),se=a(59353);function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},oe.apply(null,arguments)}const ce=F.z.object({email:F.z.string().email({message:"Email invalide"}).min(1,{message:"L'email est requis"}).max(255,{message:"L'email doit contenir moins de 255 caract√®res"}),password:F.z.string().min(1,{message:"Le mot de passe est requis"}).max(255,{message:"Le mot de passe doit contenir moins de 255 caract√®res"})});function ie(e){let{isOpen:t,isClosing:a,closeModal:n}=e;const[l,s]=(0,r.useState)(!1),{register:c,getValues:i,handleSubmit:m,formState:{errors:d}}=(0,q.mN)({resolver:(0,U.u)(ce)});return React.createElement(Y,{isOpen:t,isClosing:a,className:"max-w-sm"},React.createElement(X,{onClose:n},"Connexion"),React.createElement("form",{onSubmit:m((async()=>{const e=new FormData;e.append("username",i("email")),e.append("password",i("password"));try{s(!0);const t=await fetch("http://127.0.0.1/index.php/contestio/login/post/",{method:"POST",body:e});if(t.ok){const e=await t.json();e.success?window.location.reload():(s(!1),o.oR.error(e.message))}else s(!1),o.oR.error("Erreur lors de la connexion")}catch(e){console.error(e),s(!1)}})),className:"w-full flex flex-col gap-5"},React.createElement("div",{className:"w-full max-w-sm items-center gap-1.5 mb-2"},React.createElement(J,{htmlFor:"email"},"Email"),React.createElement(I,oe({type:"email",id:"email",placeholder:"Email",maxLength:256},c("email"))),d.email&&React.createElement("span",{className:"text-sm text-destructive"},d.email.message)),React.createElement("div",{className:"w-full max-w-sm items-center gap-1.5"},React.createElement("div",{className:"w-full flex justify-between"},React.createElement(J,{htmlFor:"password"},"Mot de passe"),React.createElement(T,{href:"http://127.0.0.1/index.php/customer/account/forgotpassword/",className:"text-sm text-muted-foreground"},"Mot de passe oubli√© ?")),React.createElement(ne,oe({className:"w-full",placeholder:"Mot de passe",maxLength:256},c("password"))),d.password&&React.createElement("span",{className:"text-sm text-destructive"},d.password.message)),React.createElement(ee,{className:"mt-2 flex flex-col gap-5 justify-center"},React.createElement(E,{type:"submit",disabled:l,className:"w-fit mx-auto flex items-center gap-2"},"Se connecter",G({icon:l?le.A:se.A,className:"w-4 h-4 "+(l?"animate-spin":"")})),React.createElement("p",{className:"text-center text-sm text-muted-foreground"},"Je n'ai pas de compte ?"," ",React.createElement(T,{href:`http://127.0.0.1/index.php/customer/account/create/?redirect=${encodeURIComponent(window.location.href)}`,className:"text-contestio-purple"},"Cr√©er un compte")))))}var me=a(35942),de=a(24750);function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ue.apply(null,arguments)}const pe=F.z.object({pseudo:F.z.string().min(2,{message:"Le pseudo doit contenir au moins 2 caract√®res."}).max(12,{message:"Le pseudo doit contenir moins de 12 caract√®res."}).regex(/^[a-zA-Z0-9_]+$/,{message:"Le pseudo ne peut contenir que des lettres, des chiffres et des underscores."})});function fe(e){let{isOpen:t,isClosing:a,closeModal:n}=e;const[l,s]=(0,r.useState)(!1),[c,m]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1),{user:f,setUser:h}=u(),{register:v,handleSubmit:b,formState:{errors:w,isValid:R},setError:x}=(0,q.mN)({resolver:(0,U.u)(pe)});return React.createElement(Y,{isOpen:t,isClosing:a,className:"max-w-sm"},!0===d&&React.createElement("div",{className:"absolute top-0 left-0 w-full h-10 flex items-center justify-center"},React.createElement(de.A,{zIndex:50})),React.createElement(X,{onClose:n},"Hey ",f?.firstName," üëã"),!1===d?React.createElement("form",{onSubmit:b((async()=>{if(f&&f.id&&f.firstName&&f.lastName&&f.email)try{s(!0),await i("v1/users/final/upsert","POST",{externalId:f.id,fname:f.firstName,lname:f.lastName,email:f.email,pseudo:c})&&h({...f,pseudo:c}),o.oR.success(`Bienvenue ${c} !`,{description:"Votre pseudo a bien √©t√© enregistr√©."}),s(!1),p(!0)}catch(e){console.error(e),s(!1),o.oR.error("Une erreur est survenue lors de la modification de votre pseudo")}else o.oR.error("Une erreur est survenue lors de la r√©cup√©ration de vos informations")})),className:"flex flex-col gap-2"},React.createElement(A,null,React.createElement(L,{asChild:!0},React.createElement("p",{className:""},"Avant de continuer, pourriez-vous nous donner"," ",React.createElement("span",{className:"text-muted-foreground italic"},"votre pseudo")," ","?")),React.createElement(_,{className:"bg-white text-black",side:"right"},React.createElement("div",{className:"flex flex-col gap-2 max-w-[300px]"},React.createElement("p",{className:"font-semibold"},"R√®gles de cr√©ation de pseudo :"),React.createElement("p",null,"Il doit √™tre unique et ne peut contenir que des lettres, des chiffres et des underscores et doit contenir entre 2 et 12 caract√®res.")))),React.createElement("div",{className:"mt-3 w-full max-w-sm items-center"},React.createElement(I,ue({type:"text",id:"pseudo",placeholder:"Votre pseudo",maxLength:12,disabled:l,className:g("border-2 border-contestio-purple/50 text-contestio-purple font-medium text-center text-lg !h-10","placeholder:text-contestio-purple/50",!!w.pseudo?.message&&"border-destructive",l&&"bg-contestio-purple/20")},v("pseudo"),{onChange:e=>{(e=>{m(e.target.value),x("pseudo",{message:""})})(e),v("pseudo").onChange(e)}})),React.createElement("div",{className:"w-full flex justify-end items-center"},React.createElement("span",{className:"text-sm text-muted-foreground"},c?.length," / 12")),w.pseudo&&React.createElement("div",{className:"w-full text-center mt-1"},React.createElement("span",{className:"text-sm text-destructive font-semibold"},w.pseudo.message))),React.createElement(ee,{className:"mt-2 flex flex-col gap-5 justify-center"},React.createElement(E,{type:"submit",disabled:l,className:"w-fit mx-auto flex items-center gap-2 p-4 text-md rounded-full"},"Valider",G({icon:l?le.A:me.A,className:"w-5 h-5 "+(l?"animate-spin":"")})),React.createElement("p",{className:"text-sm text-muted-foreground text-center"},"Il sera utilis√© pour vous identifier lors de vos participations aux concours et sondages."))):React.createElement("div",{className:"flex flex-col gap-2 items-center"},React.createElement("p",{className:"text-lg font-semibold"},"Bienvenue",React.createElement("span",{className:"text-contestio-purple font-semibold ml-1"},f?.pseudo)," ","!"),React.createElement("p",{className:"mt-2 text-muted-foreground text-center"},"Vous pouvez d√©sormais participer √† nos concours et sondages."),React.createElement(ee,{className:"mt-2"},React.createElement(E,{onClick:n,variant:"outline",className:"w-fit "},"Fermer"))))}const ge=()=>{const e=(()=>{const[e,t]=(0,r.useState)(0),a=()=>{t(window.scrollY)};return(0,r.useEffect)((()=>(window.addEventListener("scroll",a),()=>{window.removeEventListener("scroll",a)})),[]),e})(),[t,a]=(0,r.useState)(!1),[n,l]=(0,r.useState)(!1),s=(0,r.useRef)(0),o=document.getElementById("contestio-layout");(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&c()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]),(0,r.useEffect)((()=>{if(!t)return;o&&(o.style.height="85vh",o.style.overflow="hidden"),s.current=e;const a=o?.getBoundingClientRect();window.scrollTo({top:window.scrollY+(a?.top||0)-7.5*window.innerHeight/100})}),[t]);const c=e=>{l(!0),setTimeout((()=>{l(!1);const e=document.querySelectorAll('[data-contestio-modal="open"]').length;o&&1===e&&(o.style.height="auto",o.style.overflow="auto"),a(!1),window.scrollTo({top:s.current})}),300)};return{isOpen:t,isClosing:n,openModal:()=>a(!0),closeModal:c}},he=(0,r.createContext)({isLoginOpen:!1,isLoginClosing:!1,openLoginModal:()=>{},closeLoginModal:()=>{}}),ve=()=>(0,r.useContext)(he),be=e=>{let{children:t}=e;const{isOpen:a,isClosing:n,openModal:l,closeModal:s}=ge();return r.createElement(he.Provider,{value:{isLoginOpen:a,isLoginClosing:n,openLoginModal:l,closeLoginModal:s}},t)},we=(0,r.createContext)({isPseudoOpen:!1,isPseudoClosing:!1,openPseudoModal:()=>{},closePseudoModal:()=>{}}),Ee=()=>(0,r.useContext)(we),Re=e=>{let{children:t}=e;const{isOpen:a,isClosing:n,openModal:l,closeModal:s}=ge();return r.createElement(we.Provider,{value:{isPseudoOpen:a,isPseudoClosing:n,openPseudoModal:l,closePseudoModal:s}},t)},xe=function(){const{isLoginOpen:e,isLoginClosing:t,closeLoginModal:a}=ve(),{isPseudoOpen:r,isPseudoClosing:n,closePseudoModal:l}=Ee();return React.createElement("div",{className:g("bg-white border border-border/60 shadow-md rounded-2xl overflow-hidden relative","w-[94%] max-w-[1120px] my-6 mx-auto box-border")},React.createElement("div",{id:"contestio-layout",className:"relative w-full overflow-hidden"},React.createElement(M,null),React.createElement("div",{className:g("py-5 px-16 w-full")},React.createElement("main",{className:"w-full my-4"},React.createElement(s.sv,null),React.createElement(ie,{isOpen:e,isClosing:t,closeModal:a}),React.createElement(fe,{isOpen:r,isClosing:n,closeModal:l})),React.createElement($,null))))};var Ne=a(27933);function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ye.apply(null,arguments)}const Ce=r.forwardRef(((e,t)=>{let{className:a,orientation:n="horizontal",decorative:l=!0,...s}=e;return r.createElement(Ne.b,ye({ref:t,decorative:l,orientation:n,className:g("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a)},s))}));function ke(e){let{withoutButton:t=!1,withoutImage:a=!1,addSeperator:r=!1,addTitle:n=!1}=e;return React.createElement(React.Fragment,null,React.createElement("div",{className:g("w-full h-64 grid grid-cols-12 auto-rows-auto gap-4 items-center bg-white")},React.createElement("div",{className:g("h-full col-span-8",a&&"col-span-12")},n&&React.createElement(x,{className:"w-56 h-10 mb-5"}),React.createElement(x,{className:"w-full h-full"}),!t&&React.createElement(x,{className:"w-44 h-12 mt-4"})),!a&&React.createElement("div",{className:"h-full col-span-4"},React.createElement(x,{className:"m-auto w-5/6 h-4/5 rounded-xl shadow-md"}))),r&&React.createElement("div",{className:"col-span-12 w-3/5 mx-auto"},React.createElement(Ce,{className:"my-0 w-full"})))}Ce.displayName=Ne.b.displayName;const je=function(){const{navButtons:e}=u(),t=(0,s.Zp)();return(0,r.useEffect)((()=>{var a;e.length>0&&(a=e[0].navUrl,t("contest"===a?"/contests":"survey"===a?"/surveys":"/"))}),[e]),React.createElement("div",{className:"w-full flex flex-col gap-20 my-10 mb-20"},React.createElement(ke,{addSeperator:!0,withoutButton:!0}),React.createElement(ke,null),React.createElement(ke,null),React.createElement(ke,null))},Oe=function(){const{counter:e,incrementCounter:t}=u();return React.createElement("div",{className:"text-center"},React.createElement("header",{className:" min-h-screen flex flex-col items-center justify-center font-size-calc(10px + 2vmin)"},React.createElement("p",null,"Survey page ici"),React.createElement("div",null,React.createElement("p",null,"Counter: ",e),React.createElement(E,{variant:"default",onClick:t},"Increment")),React.createElement(E,{variant:"link"},React.createElement(l.N_,{to:"/"},"Revenir √† l'accueil")),React.createElement(E,{variant:"default",onClick:()=>alert("Hello")},"Hello les surveys")))};var Se=a(5204);const Pe=function(e){let{variant:t="default",className:a="",onClick:r,text:n,id:l,isActive:s=!1}=e;return React.createElement(E,{id:l,variant:t,onClick:r,className:g("text-white bg-contestio-purple border-2 border-contestio-purple rounded-lg shadow-md transition-all duration-300 text-center font-bold","hover:scale-95 hover:shadow-lg hover:bg-contestio-purple/90","active:bg-contestio-purple/70 active:shadow-sm",s&&"bg-contestio-purple/50 text-muted-foreground hover:scale-100",a)},n)},Ae=function(e){let{datas:t,onClick:a,className:r,isActive:n=!1,variant:l="default"}=e;return React.createElement(React.Fragment,null,React.createElement("style",null,t.styles&&`#${t.slug} { ${t.styles} }`,t.hover&&`#${t.slug}:hover { ${t.hover} }`,t.focus&&`#${t.slug}:active { ${t.focus} }`),React.createElement(Pe,{id:t.slug,text:t.text,onClick:a,className:r,isActive:n,variant:l}))};function Le(e){let{type:t,description:a,presignedUrl:r,button:n,className:l,title:s,onClick:o}=e;return React.createElement(React.Fragment,null,React.createElement("div",{className:g("w-full h-full grid grid-cols-12 auto-rows-auto gap-4 items-center bg-white",l)},React.createElement("div",{className:g(r?"col-span-8":"col-span-12")},s&&React.createElement("h2",{className:"text-3xl font-bold mb-2"},s),React.createElement("div",{dangerouslySetInnerHTML:{__html:a},className:g("[&_p]:min-h-6","[&_a]:text-blue-500 [&_a]:underline","[&_ul]:list-disc [&_ul]:pl-10 [&_ul]:space-y-2","[&_ol]:list-decimal [&_ol]:pl-10 [&_ol]:space-y-2","[&_li]:min-h-6","[&_h2]:text-2xl [&_h2]:font-semibold [&_h2]:mb-1","[&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2","[&_strong]:font-bold","[&_em]:italic","[&_span]:font-medium")}),n&&React.createElement(Ae,{datas:n,className:"mt-4",onClick:()=>o?.()})),r&&React.createElement("div",{className:"col-span-4"},React.createElement("img",{src:r,alt:"",className:"mx-auto w-5/6 h-auto object-cover rounded-xl shadow-md"}))),("homepage_header"===t||"banner"===t)&&React.createElement("div",{className:"col-span-12 w-3/5 mx-auto"},React.createElement(Ce,{className:"my-0 w-full"})))}var _e=a(75779),Me=a(78541),ze=a(73072),Te=a(3118);function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$e.apply(null,arguments)}const Fe=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",$e({ref:t,className:g("rounded-lg border bg-card text-card-foreground shadow-sm",a)},n))}));Fe.displayName="Card",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",$e({ref:t,className:g("flex flex-col space-y-1.5 p-6",a)},n))})).displayName="CardHeader",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("h3",$e({ref:t,className:g("text-2xl font-semibold leading-none tracking-tight",a)},n))})).displayName="CardTitle",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("p",$e({ref:t,className:g("text-sm text-muted-foreground",a)},n))})).displayName="CardDescription";const Ue=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",$e({ref:t,className:g("p-6 pt-0",a)},n))}));Ue.displayName="CardContent";const qe=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",$e({ref:t,className:g("flex items-center p-6 pt-0",a)},n))}));qe.displayName="CardFooter";var Be=a(21749),Ie=a(78719),Ve=a(39916),He=a(11813),De=a(32892);function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Je.apply(null,arguments)}const Ze=Ve.bL,Ge=(Ve.YJ,Ve.WT),Ke=r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement(Ve.l9,Je({ref:t,className:g("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},l),n,r.createElement(Ve.In,{asChild:!0},G({icon:He.A,className:"h-4 w-4 opacity-50"})))}));Ke.displayName=Ve.l9.displayName;const We=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(Ve.PP,Je({ref:t,className:g("flex cursor-default items-center justify-center py-1",a)},n),G({icon:De.A,className:"h-4 w-4"}))}));We.displayName=Ve.PP.displayName;const Ye=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(Ve.wn,Je({ref:t,className:g("flex cursor-default items-center justify-center py-1",a)},n),G({icon:He.A,className:"h-4 w-4"}))}));Ye.displayName=Ve.wn.displayName;const Qe=r.forwardRef(((e,t)=>{let{className:a,children:n,position:l="popper",...s}=e;return r.createElement(Ve.ZL,null,r.createElement(Ve.UC,Je({ref:t,className:g("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l},s),r.createElement(We,null),r.createElement(Ve.LM,{className:g("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},n),r.createElement(Ye,null)))}));Qe.displayName=Ve.UC.displayName,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(Ve.JU,Je({ref:t,className:g("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},n))})).displayName=Ve.JU.displayName;const Xe=r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement(Ve.q7,Je({ref:t,className:g("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-contestio-purple/10",a)},l),r.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},r.createElement(Ve.VF,null,G({icon:Ie.A,className:"h-4 w-4"}))),r.createElement(Ve.p4,null,n))}));function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},et.apply(null,arguments)}Xe.displayName=Ve.q7.displayName,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(Ve.wv,Je({ref:t,className:g("-mx-1 my-1 h-px bg-muted",a)},n))})).displayName=Ve.wv.displayName;const tt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("textarea",et({className:g("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t},n))}));tt.displayName="Textarea";const at=["Contenu inappropri√©","Publicit√© ou spam","Discours haineux","Usurpation d‚Äôidentit√©","Autre"];function rt(e){let{pseudo:t,_id:a}=e;const{isOpen:n,isClosing:l,openModal:s,closeModal:c}=ge(),[i,m]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{n||(m(null),u(null),f(!1),b(!1),h(!1))}),[n]),(0,r.useEffect)((()=>{i?at.includes(i)&&"Autre"!==i?f(!0):f(!("Autre"!==i||!d)):f(!1)}),[i,d]),React.createElement(React.Fragment,null,React.createElement(A,null,React.createElement(L,{className:"ml-auto",asChild:!0},React.createElement(E,{variant:"ghost-destructive",className:"w-10 h-10 p-0 text-black hover:text-destructive transition-all duration-300",onClick:s},G({icon:Be.A,fill:"black",className:"w-6 h-6 "}))),React.createElement(_,{className:"bg-white text-black"},React.createElement("p",null,"Signaler"))),React.createElement(Y,{isOpen:n,isClosing:l,className:"max-w-md"},React.createElement(X,{onClose:c},"Signalement"),React.createElement("div",{className:"flex flex-col gap-4"},React.createElement("p",null,"Vous √™tes sur le point de signaler la participation de"," ",React.createElement("strong",null,t),"."),React.createElement("p",null,"S√©lectionnez le motif de votre signalement :"),React.createElement(Ze,{onValueChange:e=>m(e)},React.createElement(Ke,null,React.createElement(Ge,{placeholder:"Motif"})),React.createElement(Qe,null,at.map((e=>React.createElement(Xe,{key:e,value:e},e))))),"Autre"===i&&React.createElement("div",{className:"flex flex-col gap-2"},React.createElement(tt,{onChange:e=>u(e.target.value),placeholder:"Ajoutez un commentaire",maxLength:255},d),React.createElement("p",{className:"text-sm text-muted-foreground ml-auto"},d?.length||0," / 255"))),React.createElement(ee,null,React.createElement(E,{onClick:()=>c(),variant:"outline"},"Annuler"),React.createElement(E,{onClick:async()=>{if(p&&!g){h(!0);try{const{status:e}=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=await fetch(`http://127.0.0.1/index.php/contestio/api/proxy?endpoint=${e}`,{method:t,headers:{"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}),n=r.ok,l=r.status,s=201===l||r.json(),o=r.statusText;if(!n)throw new Error(o);return{isOk:n,status:l,datas:s,message:o}}(`v1/participation/flag/${a}`,"POST",{description:"Autre"===i?d:i});o.oR.success("Signalement envoy√© avec succ√®s !",{description:"Merci pour votre contribution √† l'√©quit√© du concours."}),c()}catch(e){e instanceof Error?"Not found"===e.message?(o.oR.error("Cette participation n'existe pas."),c()):"Conflict"===e.message&&(o.oR.error("Vous avez d√©j√† signal√© cette participation."),c()):(console.error(e),o.oR.error("Une erreur est survenue lors du signalement."))}finally{h(!1)}}},disabled:!p||g||v,variant:"destructive",className:"flex items-center gap-2"},v?"Signalement envoy√©":"Signaler",G({icon:v?Ie.A:g?le.A:Be.A,className:"size-4 "+(g?"animate-spin":"")})))))}const nt=()=>{const{user:e}=u(),{openLoginModal:t}=ve(),{openPseudoModal:a}=Ee();return()=>e&&e.firstName?e&&!e.pseudo?(a(),!0):!e||!e.pseudo:(t(),!0)},lt=e=>{let{image:t,name:a,url:r,type:n="share",isRounded:l=!1,setReportOpen:s}=e;return React.createElement(A,null,React.createElement(L,{className:"report"===n?"ml-auto":"",asChild:!0},React.createElement(E,{variant:"report"===n?"ghost-destructive":"ghost",className:g("w-10 h-10 p-0","report"===n&&"text-black hover:text-destructive transition-all duration-300"),onClick:()=>{"share"===n?console.log("share",r):"copy"===n?(navigator.clipboard.writeText(r),o.oR.success("Lien copi√© avec succ√®s !")):"report"===n&&s&&s(!0)}},"string"==typeof t?React.createElement("img",{src:t,alt:a||n,className:g("w-6 h-6",l?"rounded-full":"rounded-md")}):G({icon:t,fill:"black",className:"w-6 h-6 "}))),React.createElement(_,{className:"bg-white text-black"},"share"===n?React.createElement("p",null,"Partager sur ",React.createElement("strong",null,a)):"copy"===n?React.createElement("p",null,"Copier le lien"):"report"===n&&React.createElement("p",null,"Signaler")))};function st(e){let{part:t,votedToday:a,defaultOpen:n=!1}=e;const[l,s]=(0,r.useState)(!1),[c,m]=(0,r.useState)(!1),{isOpen:d,isClosing:u,openModal:p,closeModal:f}=ge(),h=nt(),v=`${window.location.href.replace(/\?.*$/,"")}?ctst-u=${t.pseudo}`,b=encodeURIComponent(v),w=t.liked||!0===a||l;return(0,r.useEffect)((()=>{n&&p()}),[n]),(0,r.useEffect)((()=>{if(d){const e=new URL(window.location.href);e.searchParams.set("ctst-u",t.pseudo),window.history.pushState({path:e.href},"",e.href)}else{const e=new URL(window.location.href);e.searchParams.delete("ctst-u"),window.history.pushState({path:e.href},"",e.href)}}),[d]),React.createElement(React.Fragment,null,React.createElement(Fe,{onClick:p,className:g("border-border/30 shadow-lg cursor-pointer overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},React.createElement(Ue,{className:"pt-5 relative"},React.createElement("div",{className:"overflow-hidden rounded-xl"},React.createElement("img",{src:t.presignedUrl||"",alt:t.pseudo||"Image",className:g("w-full h-auto aspect-square rounded-xl shadow","transition-transform duration-300 hover:scale-110")}))),React.createElement(qe,{className:"flex flex-col gap-0"},React.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},React.createElement("p",{className:"font-medium text-md"},t.pseudo||""),React.createElement("div",{className:"flex flex-row gap-1 items-center"},G({icon:_e.A,fill:t.liked?"red-500":"transparent",filledRed:t.liked,className:`w-5 h-5 ${t.liked&&"text-red-500"}`}),t.likes||0)),React.createElement("p",{className:"w-full h-6 overflow-hidden text-ellipsis font-medium text-md text-muted-foreground"},t.description||""))),React.createElement(Y,{isOpen:d,isClosing:u},React.createElement(Q,{onClick:f}),React.createElement("div",{className:"grid grid-cols-2 gap-5 after:content-none max-w-[50vw]"},React.createElement("div",{className:"w-full h-full"},React.createElement("img",{src:t.presignedUrl||"",alt:t.pseudo||"Image",className:g("w-full h-auto aspect-square rounded-xl shadow-xl","transition-transform duration-300 hover:scale-110")})),React.createElement("div",{className:"w-full h-full px-4 flex flex-col justify-between"},React.createElement("p",{className:"font-medium text-lg text-center"},"Participation de"," ",React.createElement("span",{className:"font-bold"},t.pseudo||"")),React.createElement("p",{className:"text-muted-foreground text-sm text-center p-4 border border-border rounded-md my-5 break-words"},t.description||React.createElement("span",{className:"italic"},"Aucune description ajout√©e.")),React.createElement("div",{className:"my-5 mx-auto w-2/3 flex flex-col gap-5 items-center justify-between"},React.createElement("div",{className:"w-full flex flex-row gap-1 items-center justify-between"},React.createElement("div",{className:"flex flex-row gap-2 items-center"},G({icon:_e.A,filledRed:t.liked,className:`w-5 h-5 ${t.liked&&"text-red-500"}`}),t.likes||0),React.createElement("div",{className:"flex flex-row gap-2 items-center"},t.rank||0," ",1===t.rank?"er":"√®me",G({icon:1===t.rank?Me.A:ze.A,className:"w-5 h-5 "+(1===t.rank?"text-yellow-400":"text-muted-foreground")}))),React.createElement(E,{className:"w-full rounded-full gap-2 relative",disabled:w,onClick:()=>{h()||(async()=>{s(!0);try{await i(`v1/participation/like/${t._id}`,"POST"),t.likes=t.likes+1,t.liked=!0,o.oR.success("Vote ajout√© avec succ√®s !"),m(!0)}catch(e){e instanceof Error?"Not found"===e.message?o.oR.error("Cette participation n'existe pas."):"Conflict"===e.message&&o.oR.error("Vous avez d√©j√† vot√© pour cette participation aujourd'hui."):(console.error(e),o.oR.error("Une erreur est survenue lors de l'ajout du vote."))}finally{s(!1)}})()}},t.liked?"Vote ajout√©":a?"D√©j√† vot√© aujourd'hui":"Voter",c&&React.createElement("div",{className:"absolute top-0 left-0 w-full h-10 flex items-center justify-center"},React.createElement(de.A,{zIndex:50,force:.4,particleCount:30,width:300})),G({icon:l?le.A:_e.A,fill:"white",className:`w-5 h-5 text-white ${!1===w&&"animate-hi-there"} ${l&&"animate-spin"}`}))),React.createElement("footer",null,React.createElement("div",null,React.createElement("p",{className:"w-full font-light text-sm text-muted-foreground"},"Partager sur :"),React.createElement("div",null,React.createElement("div",{className:"flex flex-row gap-2 items-center"},lt({image:"/skin/frontend/base/default/reactjs-app/images/facebook.png",name:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${v}`,type:"share"}),lt({image:"/skin/frontend/base/default/reactjs-app/images/twitter.webp",name:"Twitter",url:`https://twitter.com/intent/tweet?url=${b}`,type:"share",isRounded:!0}),lt({image:"/skin/frontend/base/default/reactjs-app/images/messenger.png",name:"Messenger",url:`https://www.messenger.com/send?text=${b}`,type:"share"}),lt({image:Te.A,url:v,type:"copy"}),React.createElement(rt,{pseudo:t.pseudo,_id:t._id})))))))))}function ot(){return React.createElement(React.Fragment,null,React.createElement("span",null),React.createElement(Fe,{className:g("border-border/30 shadow-lg overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},React.createElement(Ue,{className:"pt-5 relative"},React.createElement("div",{className:"overflow-hidden rounded-xl"},React.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/podium.svg",alt:"No participants",className:g("w-full h-auto aspect-square rounded-xl shadow object-contain","transition-transform duration-300 hover:scale-110")}))),React.createElement(qe,{className:"flex flex-col gap-0"},React.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},React.createElement("p",{className:"font-medium text-md"},"Aucune participation trouv√©e !")),React.createElement("p",{className:"w-full font-medium text-md text-muted-foreground"},"Soyez le premier √† participer √† ce concours !")),React.createElement("span",null)))}var ct=a(69047),it=a(14320),mt=a(41087);function dt(e){let{loading:t,sort:a,sortBy:n,setSort:l,setSortBy:s,changeSort:o}=e;const{isOpen:c,isClosing:i,openModal:m,closeModal:d}=ge(),[u,p]=(0,r.useState)(a.current||"asc"),[f,g]=(0,r.useState)(n.current||"likes");return React.createElement(React.Fragment,null,React.createElement(E,{variant:"ghost",className:"flex items-center gap-2",disabled:t,onClick:m},"Trier par",G({icon:ct.A,className:"w-5 h-5"})),React.createElement(Y,{isOpen:c,isClosing:i},React.createElement(X,{onClose:d},"Trier par"),React.createElement("div",{className:"flex flex-col gap-4"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(I,{type:"radio",id:"populars",name:"sortBy",value:"populars",className:"w-4 h-4",defaultChecked:"likes"===n.current&&"desc"===a.current,onChange:()=>{g("likes"),p("desc")}}),React.createElement("label",{htmlFor:"populars",className:"flex items-center gap-2"},"Les plus populaires",G({icon:it.A,className:"w-5 h-5"}))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(I,{type:"radio",id:"unpopulars",name:"sortBy",value:"unpopulars",className:"w-4 h-4",defaultChecked:"likes"===n.current&&"asc"===a.current,onChange:()=>{g("likes"),p("asc")}}),React.createElement("label",{htmlFor:"unpopulars"},"Les moins populaires")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(I,{type:"radio",id:"recents",name:"sortBy",value:"recents",className:"w-4 h-4",defaultChecked:"createdAt"===n.current&&"desc"===a.current,onChange:()=>{g("createdAt"),p("desc")}}),React.createElement("label",{htmlFor:"recents",className:"flex items-center gap-2"},"Les plus r√©cents",G({icon:mt.A,className:"w-5 h-5"}))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(I,{type:"radio",id:"oldest",name:"sortBy",value:"oldest",className:"w-4 h-4",defaultChecked:"createdAt"===n.current&&"asc"===a.current,onChange:()=>{g("createdAt"),p("asc")}}),React.createElement("label",{htmlFor:"oldest"},"Les plus anciens"))),React.createElement(ee,null,React.createElement(E,{onClick:()=>{l(u),s(f),d(),o()}},"Valider"))))}var ut=a(12851);function pt(e){let{loading:t,participations:a,totalParticipations:r,search:n,setSearch:l,changeSort:s,sort:o,sortBy:c,setSort:i,setSortBy:m,resetSearch:d}=e;return React.createElement("div",{className:"w-full flex flex-row justify-between items-center gap-5 my-10"},t&&0===a.length?React.createElement(x,{className:"w-40 h-10 rounded-xl"}):React.createElement("p",{className:"font-medium text-md text-muted-foreground"},r," participation",r>1&&"s"),React.createElement("div",{className:"mx-auto flex w-2/5 items-center space-x-2 h-10"},React.createElement("div",{className:"relative w-full h-full"},React.createElement(I,{type:"text",placeholder:"Rechercher un participant",className:"min-h-10 !h-full",value:n||"",readOnly:t,maxLength:30,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key&&s()}}),n&&n.length>0&&React.createElement(E,{type:"button",variant:"link",className:"absolute right-2 top-1/2 -translate-y-1/2 h-full aspect-square p-1",onClick:d},G({icon:K.A,className:"w-5 h-5"}))),React.createElement(E,{type:"submit",className:"m-2 h-full w-auto aspect-square bg-contestio-purple hover:bg-contestio-purple/90",disabled:t,onClick:s},G({icon:t?le.A:ut.A,className:"w-5 h-5 "+(t?"animate-spin":"")}))),React.createElement(dt,{loading:t||0===a.length,sort:o,sortBy:c,setSort:i,setSortBy:m,changeSort:s}))}function ft(){return React.createElement(Fe,{className:g("border-border/30 shadow-lg cursor-pointer","hover:shadow-2xl hover:border-border transition-all duration-300")},React.createElement(Ue,{className:"pt-5"},React.createElement(x,{className:"w-full h-auto aspect-square rounded-xl"})),React.createElement(qe,{className:"flex flex-col gap-2"},React.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},React.createElement(x,{className:"w-44 h-5 rounded-xl"}),React.createElement(x,{className:"w-12 h-6 rounded-xl"})),React.createElement(x,{className:"w-full h-5 rounded-xl"})))}function gt(){return React.createElement(React.Fragment,null,React.createElement("span",null),React.createElement(Fe,{className:g("border-border/30 shadow-lg overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},React.createElement(Ue,{className:"pt-5 relative"},React.createElement("div",{className:"overflow-hidden rounded-xl"},React.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/notFound.svg",alt:"Not found",className:g("w-full h-auto aspect-square rounded-xl shadow","transition-transform duration-300 hover:scale-110")}))),React.createElement(qe,{className:"flex flex-col gap-0"},React.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},React.createElement("p",{className:"font-medium text-md"},"Aucun utilisateur trouv√© !")),React.createElement("p",{className:"w-full font-medium text-md text-muted-foreground"},"V√©rifiez que le pseudo est correct et essayez de nouveau...")),React.createElement("span",null)))}var ht=a(22869);function vt(e){let{onFileChange:t}=e;return React.createElement("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-gray-400 transition-colors",onDrop:e=>{e.preventDefault();const a=e.dataTransfer.files[0];a&&a.type.startsWith("image/")&&t(a)},onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("border-blue-500","bg-blue-50")},onDragLeave:e=>{e.currentTarget.classList.remove("border-blue-500","bg-blue-50")}},React.createElement("p",{className:"text-gray-500 mb-2"},"Glissez et d√©posez votre image ici"),React.createElement("p",{className:"text-sm text-gray-400"},"ou"),React.createElement("label",{htmlFor:"file-upload",className:"mt-2 inline-block bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition-colors"},"S√©lectionnez un fichier"),React.createElement("input",{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files?.[0];a&&t(a)},className:"hidden"}))}var bt=a(71083);function wt(e){let{contestId:t,isOpen:a,isClosing:n,closeModal:l}=e;const[s,o]=(0,r.useState)(!1),[c,i]=(0,r.useState)(""),m=(0,r.useRef)(null),[d,u]=(0,r.useState)(),[p,f]=(0,r.useState)();return React.createElement(Y,{isOpen:a,isClosing:n,className:"w-[60vw]"},React.createElement(X,{onClose:l},"Participer"),React.createElement("div",{className:"grid grid-cols-2 gap-4 auto-rows-auto"},React.createElement("div",{className:"flex flex-col gap-4"},s&&React.createElement("div",{className:"flex flex-col gap-2 justify-center items-center border border-border shadow p-4 rounded-md"},React.createElement("p",null,"V√©rification de l'image"),G({icon:le.A,className:"w-7 h-7 animate-spin text-contestio-purple"})),!s&&!c&&React.createElement(vt,{onFileChange:async e=>{if(e){u(void 0);try{o(!0);const a=new FormData;a.append("file",e,e.name);const{data:r}=await bt.A.post(`http://127.0.0.1/index.php/contestio/api/proxy?endpoint=v1/participation/check-image/${t}`,a,{headers:{"Content-Type":"multipart/form-data"}}),n=new Image;n.src="data:application/octet-stream;base64,"+r,n.onload=function(){i(n.src)}}catch(e){console.error(e)}finally{o(!1)}}else i("")}}),!s&&!!c&&React.createElement("div",{className:"flex flex-col gap-2 justify-center items-center border border-border shadow pb-2 rounded-md"},React.createElement(ht.Ay,{crop:d,onChange:(e,t)=>u(t),onComplete:e=>f(e),aspect:1,minHeight:100,className:"w-full h-full"},React.createElement("img",{ref:m,alt:"Crop me",src:c,className:"w-full h-full object-contain !max-w-[400px] !max-h-[400px]",onLoad:e=>{const{width:t,height:a}=e.currentTarget;var r,n;u((r=t,n=a,(0,ht.ge)((0,ht.dS)({unit:"%",width:90},1,r,n),r,n)))}})),React.createElement("div",{className:"px-2 w-full flex justify-between gap-2"},React.createElement(E,{onClick:()=>i(""),variant:"ghost-destructive",className:"w-fit justify-start"},"Supprimer",G({icon:K.A,className:"w-5 h-5"})),React.createElement(E,{className:"gap-2",onClick:()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!p)return void console.error("No crop selected");if(!m.current)return void console.error("No image loaded");if(!t)return void console.error("Failed to get canvas context");const a=m.current.naturalWidth/m.current.width,r=m.current.naturalHeight/m.current.height,n=window.devicePixelRatio;e.width=Math.floor(p.width*a*n),e.height=Math.floor(p.height*r*n),t.scale(n,n),t.imageSmoothingQuality="high";const l=p.x*a,s=p.y*r;t.drawImage(m.current,l,s,p.width*a,p.height*r,0,0,p.width*a,p.height*r);const o=e.toDataURL("image/webp");console.log(o)},type:"button"},React.createElement("span",null,"Valider"),G({icon:Ie.A,className:"w-5 h-5"})))))),React.createElement(ee,null,React.createElement(E,{onClick:()=>{console.log("submit")}},"Participer")))}const Et=function(){const[e]=(0,l.ok)(),t=nt(),{isOpen:a,isClosing:n,openModal:s,closeModal:o}=ge(),m=(0,r.useRef)(e.get("ctst-q")),d=(0,r.useRef)(e.get("ctst-u")),p=(0,r.useRef)(1),f=(0,r.useRef)("desc"),g=(0,r.useRef)("likes"),[h,v]=(0,r.useState)(d.current?d.current:m.current||""),[b,w]=(0,r.useState)(!0),[R,x]=(0,r.useState)([]),[N,y]=(0,r.useState)({limit:0,page:0,totalPages:0,totalParticipations:0}),{contestsLoading:C,setContestsLoading:k,contestsContent:j,setContestsContent:O}=u();(0,r.useEffect)((()=>{console.log("Contest juste mounted"),C&&P()}),[]),(0,r.useEffect)((()=>{L()}),[j]),(0,r.useEffect)((()=>{if(!b)if(m.current=h,h.length>0){const e=new URL(window.location.href);e.searchParams.set("ctst-q",h),window.history.pushState({path:e.href},"",e.href)}else{const e=new URL(window.location.href);e.searchParams.delete("ctst-q"),window.history.pushState({path:e.href},"",e.href)}}),[h]);const S=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w(!0),p.current=1,x([]);const t=await A(j?.contest?.slug||"",e);x(t)},P=async()=>{try{const e=await i("v1/contests/metadatas");O(e)}catch(e){console.error("Erreur de fetch:",e)}finally{k(!1)}},A=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w(!0);try{const a=await i(`v1/contests/${e}/${g.current}/${f.current}/${p.current}?search=${t?"":h}`);return y({limit:a.limit||0,page:a.page||0,totalPages:a.totalPages||0,totalParticipations:a.totalParticipations||0}),a.participations||[]}catch(e){console.error("Erreur de fetch:",e)}finally{w(!1)}},L=async()=>{if(!j?.contest?.slug)return;const e=(await A(j?.contest?.slug||"")).filter((e=>!R.some((t=>t._id===e._id))));x([...R,...e])};return C?React.createElement("div",{className:"w-full flex flex-col gap-20 my-20"},React.createElement(ke,{addSeperator:!0,withoutButton:!0}),React.createElement(ke,{addTitle:!0,withoutImage:!0})):React.createElement("section",{className:"flex flex-col items-center justify-center"},React.createElement(c.mg,null,React.createElement("meta",{property:"og:title",content:`Concours ${j?.contest?.name}`}),React.createElement("meta",{property:"og:description",content:j?.contest?.description}),React.createElement("meta",{property:"og:image",content:j?.banner?.presignedUrl})),j?.contest&&React.createElement("div",{className:"w-full flex flex-col gap-20 mb-10"},React.createElement(Le,{type:j.contest.type,title:j.contest.name,description:j.contest.description,button:j.contest.buttonParticipate,onClick:()=>{t()||s()}})),React.createElement(wt,{contestId:j?.contest?._id||"",isOpen:a,isClosing:n,closeModal:o}),React.createElement(pt,{loading:b,participations:R,totalParticipations:N.totalParticipations,search:h,setSearch:e=>{v(e)},changeSort:S,sort:f,sortBy:g,setSort:e=>{f.current=e},setSortBy:e=>{g.current=e},resetSearch:()=>{v(""),m.current="",d.current="",S(!0)}}),React.createElement("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10 after:content-none"},b&&0===R.length?React.createElement(React.Fragment,null,React.createElement(ft,null),React.createElement(ft,null),React.createElement(ft,null),React.createElement(ft,null),React.createElement(ft,null),React.createElement(ft,null)):R.map((e=>React.createElement(st,{key:e._id,part:e,votedToday:j?.votedToday||!1,defaultOpen:null!==d.current&&d.current===e.pseudo}))),b||0!==R.length?null:h.length>0?React.createElement(gt,null):React.createElement(ot,null),b&&React.createElement(React.Fragment,null,React.createElement(ft,null),React.createElement(ft,null),React.createElement(ft,null))),N.totalPages>1&&p.current<N.totalPages&&React.createElement(E,{variant:"ghost",disabled:b,onClick:()=>{p.current+=1,L()},className:"flex items-center gap-2 mt-10"},"Voir plus"," ",G(b?{icon:le.A,className:"size-5 animate-spin"}:{icon:Se.A,className:"size-5"})))},Rt=function(){const e=window.location.href.includes("contestio")?"/index.php/contestio":"/";return React.createElement(l.Kd,{basename:e},React.createElement(d,null,React.createElement(o.l$,null),React.createElement(c.vd,null,React.createElement(P,null,React.createElement(be,null,React.createElement(Re,null,React.createElement(s.BV,null,React.createElement(s.qh,{element:React.createElement(xe,null)},React.createElement(s.qh,{path:"/contests",element:React.createElement(Et,null)}),React.createElement(s.qh,{path:"/surveys",element:React.createElement(Oe,null)}),React.createElement(s.qh,{path:"/",element:React.createElement(je,null)})))))))))};n.createRoot(document.getElementById("root")).render(r.createElement(r.StrictMode,null,r.createElement(Rt,null)))}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(a.exports,a,a.exports,l),a.loaded=!0,a.exports}l.m=r,e=[],l.O=(t,a,r,n)=>{if(!a){var s=1/0;for(m=0;m<e.length;m++){a=e[m][0],r=e[m][1],n=e[m][2];for(var o=!0,c=0;c<a.length;c++)(!1&n||s>=n)&&Object.keys(l.O).every((e=>l.O[e](a[c])))?a.splice(c--,1):(o=!1,n<s&&(s=n));if(o){e.splice(m--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[a,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var s={};t=t||[null,a({}),a([]),a(a)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=a(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(n,s),n},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={792:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,s=a[0],o=a[1],c=a[2],i=0;if(s.some((t=>0!==e[t]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(c)var m=c(l)}for(t&&t(a);i<s.length;i++)n=s[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(m)},a=self.webpackChunkreactts_app=self.webpackChunkreactts_app||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),l.nc=void 0,l.O(void 0,[96],(()=>l(84315))),l.O(void 0,[96],(()=>l(7452)));var s=l.O(void 0,[96],(()=>l(7509)));s=l.O(s)})();