(()=>{"use strict";var e,t,a,r={35412:(e,t,a)=>{var r=a(96540),n=a(5338),l=a(84976),s=a(47767),o=a(64721),c=a(85902),i=a(34164),m=a(50856);function d(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,m.QP)((0,i.$)(t))}var u=a(71083);const p="http://127.0.0.1/index.php/contestio/api/proxy?endpoint=",f=async e=>await u.A.get(p+e),g=async(e,t,a)=>await u.A.post(p+e,t,{headers:a});var h=a(53110);const x=(0,r.createContext)(void 0);function b(e){let{children:t}=e;const[a,n]=(0,r.useState)(!0),[l,s]=(0,r.useState)([]),[c,i]=(0,r.useState)(null),[m,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)([]),[g,b]=(0,r.useState)(!0),[v,E]=(0,r.useState)(null),[w,N]=(0,r.useState)({title:"",description:"",presignedUrl:""}),[y,C]=(0,r.useState)(0);(0,r.useEffect)((()=>{console.log("Context mounted"),j()}),[]);const j=async()=>{try{const{data:e}=await f("v1/org/header");s(e.buttons||[]),N(e.banner);const t=e.user||null,a=null!==t.pseudo&&t.pseudo?.length>0;if(!Object.values(t).every((e=>null===e||""===e))&&a)i(t);else{const{data:e}=await f("me");i(e)}}catch(e){e instanceof h.pe&&o.oR.error(e.response?.data.message),console.error(e)}finally{n(!1)}};return r.createElement(x.Provider,{value:{counter:y,setCounter:C,incrementCounter:()=>C(y+1),decrementCounter:()=>C(y-1),navButtons:l,user:c,setUser:i,appLoading:a,homepageLoading:m,homepageContent:u,setHomepageLoading:d,setHomepageContent:p,contestsLoading:g,contestsContent:v,setContestsLoading:b,setContestsContent:E,banner:w}},t)}function v(){const e=(0,r.useContext)(x);if(void 0===e)throw new Error("useAppContext doit être utilisé à l'intérieur d'un AppProvider");return e}var E=a(33362),w=a(80097);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N.apply(null,arguments)}const y=(0,w.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-contestio-purple text-white hover:bg-contestio-purple/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 active:bg-destructive/60",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"text-contestio-purple text-md font-medium hover:bg-contestio-purple/10","ghost-destructive":"text-destructive text-md font-medium hover:bg-destructive/10",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=r.forwardRef(((e,t)=>{let{className:a,variant:n,size:l,asChild:s=!1,...o}=e;const c=s?E.DX:"button";return r.createElement(c,N({className:d(y({variant:n,size:l,className:a})),ref:t},o))}));function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},j.apply(null,arguments)}function O(e){let{className:t,...a}=e;return r.createElement("div",j({className:d("animate-pulse rounded-md bg-muted",t)},a))}C.displayName="Button";var k=a(35847);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},S.apply(null,arguments)}const P=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(k.bL,S({ref:t,className:d("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a)},n))}));P.displayName=k.bL.displayName;const R=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(k._V,S({ref:t,className:d("aspect-square h-full w-full",a)},n))}));R.displayName=k._V.displayName;const A=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(k.H4,S({ref:t,className:d("flex h-full w-full items-center justify-center rounded-full bg-muted",a)},n))}));A.displayName=k.H4.displayName;var L=a(3881);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_.apply(null,arguments)}const z=L.Kq,M=L.bL,U=L.l9,I=r.forwardRef(((e,t)=>{let{className:a,sideOffset:n=4,...l}=e;return r.createElement(L.UC,_({ref:t,sideOffset:n,className:d("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a)},l))}));I.displayName=L.UC.displayName;const F=function(){const{appLoading:e,user:t,banner:a,navButtons:n}=v(),l=(0,s.Zp)(),o=window.location.pathname.split("/").pop(),c="/"===o||""===o||"contestio"===o,i="contests"===o,m="surveys"===o;return r.createElement("header",{className:"w-full flex flex-col"},r.createElement("div",{className:d("relative flex flex-col gap-5 h-80 w-full bg-cover bg-center"),style:{backgroundImage:a.presignedUrl?`url(${a.presignedUrl})`:"none"}},r.createElement("div",{className:"bg-gradient-to-br from-black/10 to-black/70 md:to-black/50 w-full h-full"}),a.title?r.createElement("h1",{className:"text-white text-2xl text-left md:text-[2.5em] leading-tight font-bold absolute top-4 left-4 w-3/4 md:w-2/5 drop-shadow-md whitespace-normal"},"Bienvenue au club LEg!"):r.createElement("div",{className:"absolute text-2xl text-right md:text-4xl top-4 right-4 w-2/4 md:w-1/4 drop-shadow-md"},r.createElement(O,{className:"h-[20px] md:h-[30px] w-[180px] md:w-[230px] rounded-xl mb-1"}),r.createElement(O,{className:"h-[20px] md:h-[30px] w-[180px] md:w-[230px] rounded-xl"})),a.description?r.createElement("p",{className:"text-white leading-relaxed font-semibold absolute bottom-4 md:bottom-8 left-0 right-0 w-full px-2 md:px-8 text-left drop-shadow-md"},a.description):r.createElement("div",{className:"absolute bottom-8 left-0 right-0 w-full px-8 text-left drop-shadow-md"},r.createElement(O,{className:"h-[20px] w-[100%] rounded-xl mb-1"}),r.createElement(O,{className:"h-[20px] w-[230px] rounded-xl"}))),r.createElement("nav",{className:"flex justify-between items-center gap-2 md:gap-5 border-b border-gray-200 px-4 md:px-16 shadow-md overflow-x-auto no-scrollbar"},r.createElement("div",{className:"flex items-center gap-5 pt-4"},e?r.createElement(r.Fragment,null,r.createElement(O,{className:"h-[20px] w-[100px] rounded-xl mb-4"}),r.createElement(O,{className:"h-[20px] w-[100px] rounded-xl mb-4"})):n.map((e=>(e=>{const t="contest"===e.navUrl?i:"survey"===e.navUrl?m:c;return r.createElement(C,{key:e.slug,id:e.slug,onClick:()=>{return t=e.navUrl||"",void l("contest"===t?"/contests":"survey"===t?"/surveys":"/");var t},className:d("bg-white text-contestio-purple font-bold border-0 rounded-none border-b-2 pb-5 border-transparent","hover:border-contestio-purple/50 hover:bg-white hover:text-contestio-purple/70","active:border-contestio-purple/80 active:text-contestio-purple/80",t&&"border-contestio-purple hover:border-contestio-purple hover:bg-white hover:text-contestio-purple")},e.text)})(e)))),t&&t.pseudo&&r.createElement(M,null,r.createElement(U,{asChild:!0},r.createElement(C,{variant:"ghost",onClick:()=>l("/profile"),className:d("flex justify-end items-center gap-2 border border-border/70 rounded-md px-2 py-1 shadow","cursor-pointer hover:border-border hover:shadow-md hover:bg-white")},r.createElement("span",{className:"text-md font-normal text-contestio-purple"},t.pseudo),r.createElement(P,{className:"w-7 h-7"},r.createElement(R,{src:t.avatar}),r.createElement(A,{className:"text-muted-foreground font-medium text-sm"},(t.firstName+" "+t.pseudo).split(" ").filter((e=>""!==e)).map((e=>e[0])).join(""))))),r.createElement(I,{className:"bg-white text-black"},r.createElement("p",null,"Voir mon profil")))))};function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$.apply(null,arguments)}const V=function(e){return r.createElement("a",$({},e,{className:d("text-muted-foreground border-b border-b-transparent no-underline","hover:no-underline hover:border-b-contestio-purple hover:text-contestio-purple transition-all duration-300",e.className)}))},T=function(){const e=`https://contestio.fr/report-bug?url=${window.location.href}&version=0.1.0`;return r.createElement("footer",{className:"w-full my-0 flex justify-center md:justify-end items-center"},r.createElement("div",{className:"flex items-center gap-2 text-sm text-muted-foreground"},r.createElement(V,{href:e,target:"_blank"},"Signaler un bug"),r.createElement("span",{className:"border-b border-b-transparent"},"-"),r.createElement("span",{className:"font-light border-b border-b-transparent"},"Powered by"),r.createElement(V,{href:"https://contestio.fr",target:"_blank"},"Contestio"),r.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/logo.png",alt:"Contestio",height:20,width:20})))};var B=a(14476),q=a(49785),D=a(9013),H=a(59353),Z=a(70893),J=a(25191),K=a(60990),W=a(24082);const Y=e=>{let{icon:t,filledRed:a,fill:n,className:l}=e;const s=(0,W.A)(t);return r.createElement("span",{dangerouslySetInnerHTML:{__html:s.outerHTML},className:d("[&_svg]:w-full [&_svg]:h-full",a?"[&_svg]:fill-red-500":n&&`[&_svg]:fill-${n}`,l)})};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(null,arguments)}const G=e=>{let{children:t,...a}=e;const[n,l]=r.useState(a.open||!1);return r.createElement(K.bL,Q({modal:!0,open:n,onOpenChange:e=>{l(e),a.onOpenChange?.(e)}},a),t)},X=K.l9,ee=e=>{let{children:t,...a}=e;const n=document.getElementById("contestio-layout");return r.createElement(K.ZL,Q({},a,{container:n}),t)},te=(K.bm,r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement(ee,null,r.createElement("div",{className:"absolute inset-0 w-full z-50 bg-white/75 backdrop-blur animate-fade-in"}),r.createElement(K.UC,Q({ref:t,className:d("contestioModal fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg max-h-[63vh] overflow-auto translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-10 shadow-xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",a)},l),n,r.createElement(K.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},Y({icon:J.A,className:"size-4"}),r.createElement("span",{className:"sr-only"},"Close"))))})));te.displayName=K.UC.displayName;const ae=e=>{let{className:t,...a}=e;return r.createElement("div",Q({className:d("flex flex-col space-y-1.5 text-center sm:text-left",t)},a))};ae.displayName="DialogHeader";const re=e=>{let{className:t,...a}=e;return r.createElement("div",Q({className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},a))};re.displayName="DialogFooter";const ne=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(K.hE,Q({ref:t,className:d("text-lg font-semibold leading-none tracking-tight",a)},n))}));ne.displayName=K.hE.displayName;const le=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(K.VY,Q({ref:t,className:d("text-sm text-muted-foreground",a)},n))}));le.displayName=K.VY.displayName;var se=a(97248),oe=a(40961);function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ce.apply(null,arguments)}const ie=e=>{let{shouldScaleBackground:t=!0,...a}=e;return r.createElement(se._s.Root,ce({shouldScaleBackground:t},a))};ie.displayName="Drawer";const me=se._s.Trigger,de=e=>{let{children:t}=e;const[a,n]=r.useState(!1);return r.useEffect((()=>(n(!0),()=>n(!1))),[]),a?oe.createPortal(t,document.getElementById("root")):null},ue=(se._s.Close,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(se._s.Overlay,ce({ref:t,className:d("fixed inset-0 z-50 bg-black/80",a)},n))})));ue.displayName=se._s.Overlay.displayName;const pe=r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement(de,null,r.createElement(ue,null),r.createElement(se._s.Content,ce({ref:t,className:d("fixed inset-x-0 bottom-0 px-4 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",a)},l),r.createElement("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n))}));pe.displayName="DrawerContent";const fe=e=>{let{className:t,...a}=e;return r.createElement("div",ce({className:d("grid gap-1.5 p-4 mb-2 text-center sm:text-left",t)},a))};fe.displayName="DrawerHeader";const ge=e=>{let{className:t,...a}=e;return r.createElement("div",ce({className:d("mt-2 flex flex-col gap-2 p-4",t)},a))};ge.displayName="DrawerFooter";const he=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(se._s.Title,ce({ref:t,className:d("text-lg font-semibold leading-none tracking-tight",a)},n))}));function xe(e){const[t,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const r=window.matchMedia(e);r.matches!==t&&a(r.matches);const n=()=>a(r.matches);return r.addListener(n),()=>r.removeListener(n)}),[t,e]),t}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},be.apply(null,arguments)}he.displayName=se._s.Title.displayName,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(se._s.Description,ce({ref:t,className:d("text-sm text-muted-foreground",a)},n))})).displayName=se._s.Description.displayName;const ve=e=>{let{children:t,...a}=e;return xe("(max-width: 768px)")?r.createElement(ie,a,t):r.createElement(G,a,t)};ve.displayName="Modal";const Ee=r.forwardRef(((e,t)=>{let{children:a,...n}=e;const l=xe("(max-width: 768px)")?me:X;return r.createElement(l,{asChild:!0},r.createElement(C,be({ref:t},n),a))}));Ee.displayName="ModalTrigger",r.forwardRef(((e,t)=>{let{children:a,...n}=e;const l=xe("(max-width: 768px)")?me:X;return r.createElement(l,be({asChild:!0,ref:t},n),a)})).displayName="ModalTriggerDiv";const we=e=>{let{children:t,...a}=e;return xe("(max-width: 768px)")?r.createElement(pe,a,t):r.createElement(te,a,t)};we.displayName="ModalContent";const Ne=e=>{let{children:t,...a}=e;return xe("(max-width: 768px)")?r.createElement(fe,a,t):r.createElement(ae,a,t)};Ne.displayName="ModalHeader";const ye=e=>{let{children:t,...a}=e;return xe("(max-width: 768px)")?r.createElement(ge,a,t):r.createElement(re,a,t)};ye.displayName="ModalFooter";const Ce=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return xe("(max-width: 768px)")?r.createElement(he,be({ref:t,className:d("text-lg font-semibold",a)},n)):r.createElement(ne,be({ref:t,className:d("text-lg font-semibold",a)},n))}));Ce.displayName="ModalTitle";const je=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(le,be({ref:t,className:d("text-sm text-muted-foreground",a)},n))}));function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Oe.apply(null,arguments)}je.displayName=le.displayName;const ke=r.forwardRef(((e,t)=>{let{className:a,type:n,...l}=e;return r.createElement("input",Oe({type:n,className:d("flex h-10 !w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-contestio-purple/20 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t},l))}));ke.displayName="Input";var Se=a(95920);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Pe.apply(null,arguments)}const Re=(0,w.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement(Se.b,Pe({ref:t,className:d(Re(),a)},n))}));Ae.displayName=Se.b.displayName;var Le=a(28710),_e=a(65550);function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ze.apply(null,arguments)}const Me=(0,r.forwardRef)(((e,t)=>{let{className:a,...n}=e;const[l,s]=(0,r.useState)(!1);return r.createElement("div",{className:"relative flex items-center"},r.createElement(ke,ze({type:l?"text":"password",className:d("hide-password-toggle pr-10",a),ref:t},n)),r.createElement(C,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-[0] h-full px-3 py-2 hover:bg-transparent",onClick:()=>s((e=>!e))},Y({icon:l?Le.A:_e.A,className:"h-4 w-4"})),r.createElement("style",null,"\n\t\t\t\t\t.hide-password-toggle::-ms-reveal,\n\t\t\t\t\t.hide-password-toggle::-ms-clear {\n\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n          "))}));function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ue.apply(null,arguments)}Me.displayName="PasswordInput";const Ie=B.z.object({email:B.z.string().email({message:"Email invalide"}).min(1,{message:"L'email est requis"}).max(255,{message:"L'email doit contenir moins de 255 caractères"}),password:B.z.string().min(1,{message:"Le mot de passe est requis"}).max(255,{message:"Le mot de passe doit contenir moins de 255 caractères"})});function Fe(e){let{open:t,setOpen:a}=e;const[n,l]=(0,r.useState)(!1),{register:s,getValues:c,handleSubmit:i,formState:{errors:m}}=(0,q.mN)({resolver:(0,Z.u)(Ie)});return r.createElement(ve,{open:t,onOpenChange:a},r.createElement(we,{className:"md:max-w-sm"},r.createElement(Ne,null,r.createElement(Ce,null,"Connexion"),r.createElement(je,null,"Connectez-vous à votre compte pour accéder à toutes les fonctionnalités de Contestio.")),r.createElement("form",{onSubmit:i((async()=>{const e=new FormData;e.append("username",c("email")),e.append("password",c("password"));try{l(!0);const{data:t}=await(async e=>await u.A.post("http://127.0.0.1/index.php/contestio/login/post/",e))(e);t.success?(o.oR.success("Connexion en cours..."),window.location.reload()):(l(!1),o.oR.error(t.message||"Une erreur est survenue"))}catch(e){console.error(e),l(!1),o.oR.error("Erreur lors de la connexion")}})),className:"w-full flex flex-col gap-5"},r.createElement("div",{className:"w-full max-w-sm items-center gap-1.5 mb-2"},r.createElement(Ae,{htmlFor:"email"},"Email"),r.createElement(ke,Ue({type:"email",id:"email",placeholder:"Email",maxLength:256},s("email"))),m.email&&r.createElement("span",{className:"text-sm text-destructive"},m.email.message)),r.createElement("div",{className:"w-full max-w-sm items-center gap-1.5"},r.createElement("div",{className:"w-full flex justify-between"},r.createElement(Ae,{htmlFor:"password"},"Mot de passe"),r.createElement(V,{href:"http://127.0.0.1/index.php/customer/account/forgotpassword/",className:"text-sm text-muted-foreground"},"Mot de passe oublié ?")),r.createElement(Me,Ue({className:"w-full",placeholder:"Mot de passe",maxLength:256},s("password"))),m.password&&r.createElement("span",{className:"text-sm text-destructive"},m.password.message)),r.createElement(ye,{className:"mt-2 flex !flex-col gap-5 justify-center"},r.createElement(C,{type:"submit",disabled:n,className:"w-fit mx-auto flex items-center gap-2"},"Se connecter",Y({icon:n?D.A:H.A,className:"w-4 h-4 "+(n?"animate-spin":"")})),r.createElement("p",{className:"text-center text-sm text-muted-foreground"},"Je n'ai pas de compte ?"," ",r.createElement(V,{href:`http://127.0.0.1/index.php/customer/account/create/?redirect=${encodeURIComponent(window.location.href)}`,className:"text-contestio-purple"},"Créer un compte"))))))}var $e=a(35942),Ve=a(24750);function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Te.apply(null,arguments)}const Be=B.z.object({pseudo:B.z.string().min(2,{message:"Le pseudo doit contenir au moins 2 caractères."}).max(12,{message:"Le pseudo doit contenir moins de 12 caractères."}).regex(/^[a-zA-Z0-9_]+$/,{message:"Le pseudo ne peut contenir que des lettres, des chiffres et des underscores."})});function qe(e){let{open:t,setOpen:a}=e;const[n,l]=(0,r.useState)(""),[s,c]=(0,r.useState)(!1),[i,m]=(0,r.useState)(!1),{user:u,setUser:p}=v(),{register:f,handleSubmit:h,formState:{errors:x},setError:b}=(0,q.mN)({resolver:(0,Z.u)(Be)});return r.createElement(ve,{open:t,onOpenChange:a},r.createElement(we,{className:"md:max-w-sm"},!0===i&&r.createElement("div",{className:"absolute top-0 left-0 w-full h-10 flex items-center justify-center"},r.createElement(Ve.A,{zIndex:50})),r.createElement(Ne,null,r.createElement(Ce,null,"Hey ",u?.firstName," 👋"),r.createElement(je,null,r.createElement(M,null,r.createElement(U,{asChild:!0},r.createElement("p",{className:""},"Avant de continuer, pourriez-vous nous donner"," ",r.createElement("span",{className:"text-muted-foreground italic"},"votre pseudo")," ","?")),r.createElement(I,{className:"bg-white text-black",side:"bottom"},r.createElement("div",{className:"flex flex-col gap-2 max-w-[300px]"},r.createElement("p",{className:"font-semibold"},"Règles de création de pseudo :"),r.createElement("p",null,"Il doit être unique et ne peut contenir que des lettres, des chiffres et des underscores et doit contenir entre 2 et 12 caractères.")))))),!1===i?r.createElement("form",{onSubmit:h((async()=>{if(u&&u.id)if(u.pseudo)o.oR.error("Vous avez déjà un pseudo.");else try{c(!0),await g("pseudo",{pseudo:n}),p({...u,pseudo:n}),o.oR.success(`Bienvenue ${n} !`,{description:"Votre pseudo a bien été enregistré."}),c(!1),m(!0)}catch(e){console.error(e),c(!1),o.oR.error("Une erreur est survenue lors de la modification de votre pseudo")}else o.oR.error("Une erreur est survenue lors de la récupération de vos informations")})),className:"flex flex-col gap-2"},r.createElement("div",{className:"mt-3 w-full max-w-sm items-center"},r.createElement(ke,Te({type:"text",id:"pseudo",autoComplete:"off",placeholder:"Votre pseudo",maxLength:12,disabled:s,className:d("border-2 border-contestio-purple/50 text-contestio-purple font-medium text-center text-lg !h-10","placeholder:text-contestio-purple/50",!!x.pseudo?.message&&"border-destructive",s&&"bg-contestio-purple/20")},f("pseudo"),{onChange:e=>{(e=>{l(e.target.value),b("pseudo",{message:""})})(e),f("pseudo").onChange(e)}})),r.createElement("div",{className:"w-full flex justify-end items-center"},r.createElement("span",{className:"text-sm text-muted-foreground"},n?.length," / 12")),x.pseudo&&r.createElement("div",{className:"w-full text-center mt-1"},r.createElement("span",{className:"text-sm text-destructive font-semibold"},x.pseudo.message))),r.createElement(ye,{className:"mt-2 flex !flex-col gap-5 justify-center"},r.createElement(C,{type:"submit",disabled:s,className:"w-fit mx-auto flex items-center gap-2 p-4 text-md rounded-full"},"Valider",Y({icon:s?D.A:$e.A,className:"w-5 h-5 "+(s?"animate-spin":"")})),r.createElement("p",{className:"text-sm text-muted-foreground text-center"},"Il sera utilisé pour vous identifier lors de vos participations aux concours et sondages."))):r.createElement("div",{className:"flex flex-col gap-2 items-center"},r.createElement("p",{className:"text-lg font-semibold"},"Bienvenue",r.createElement("span",{className:"text-contestio-purple font-semibold ml-1"},u?.pseudo)," ","!"),r.createElement("p",{className:"mt-2 text-muted-foreground text-center"},"Vous pouvez désormais participer à nos concours et sondages."),r.createElement(ye,{className:"mt-2"},r.createElement(C,{onClick:()=>a(!1),variant:"outline",className:"w-fit "},"Fermer")))))}const De=(0,r.createContext)({isLoginOpen:!1,setIsLoginOpen:()=>{}}),He=()=>(0,r.useContext)(De),Ze=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(!1);return r.createElement(De.Provider,{value:{isLoginOpen:a,setIsLoginOpen:n}},t)},Je=(0,r.createContext)({isPseudoOpen:!1,setIsPseudoOpen:()=>{}}),Ke=()=>(0,r.useContext)(Je),We=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(!1);return r.createElement(Je.Provider,{value:{isPseudoOpen:a,setIsPseudoOpen:n}},t)},Ye=function(){const{isLoginOpen:e,setIsLoginOpen:t}=He(),{isPseudoOpen:a,setIsPseudoOpen:n}=Ke();return r.createElement("div",{className:d("bg-white md:border md:border-border/60 md:shadow-md md:rounded-2xl md:overflow-hidden relative","w-full md:w-[94%] max-w-[1120px] my-6 mx-auto box-border")},r.createElement("div",{id:"contestio-layout",className:"relative w-full overflow-hidden"},r.createElement(F,null),r.createElement("div",{className:d("py-5 px-4 md:px-16 w-full")},r.createElement("main",{className:"w-full my-4"},r.createElement(s.sv,null),r.createElement(Fe,{open:e,setOpen:t}),r.createElement(qe,{open:a,setOpen:n})),r.createElement(T,null))))};var Qe=a(27933);function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ge.apply(null,arguments)}const Xe=r.forwardRef(((e,t)=>{let{className:a,orientation:n="horizontal",decorative:l=!0,...s}=e;return r.createElement(Qe.b,Ge({ref:t,decorative:l,orientation:n,className:d("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a)},s))}));function et(e){let{withoutButton:t=!1,withoutImage:a=!1,addSeperator:n=!1,addTitle:l=!1}=e;return r.createElement(r.Fragment,null,r.createElement("div",{className:d("w-full h-64 grid grid-cols-12 auto-rows-auto gap-4 items-center bg-white")},r.createElement("div",{className:d("h-full col-span-8",a&&"col-span-12")},l&&r.createElement(O,{className:"w-56 h-10 mb-5"}),r.createElement(O,{className:"w-full h-full"}),!t&&r.createElement(O,{className:"w-44 h-12 mt-4"})),!a&&r.createElement("div",{className:"h-full col-span-4"},r.createElement(O,{className:"m-auto w-5/6 h-4/5 rounded-xl shadow-md"}))),n&&r.createElement("div",{className:"col-span-12 w-3/5 mx-auto"},r.createElement(Xe,{className:"my-0 w-full"})))}Xe.displayName=Qe.b.displayName;const tt=function(){const{navButtons:e}=v(),t=(0,s.Zp)();return(0,r.useEffect)((()=>{var a;e.length>0&&(a=e[0].navUrl,t("contest"===a?"/contests":"survey"===a?"/surveys":"/"))}),[e]),r.createElement("div",{className:"w-full flex flex-col gap-20 my-10 mb-20"},r.createElement(et,{addSeperator:!0,withoutButton:!0}),r.createElement(et,null),r.createElement(et,null),r.createElement(et,null))};function at(){return r.createElement("div",{className:"flex flex-col items-center justify-center h-full min-h-56 border rounded-xl p-4 mb-5 shadow-md"},r.createElement("h1",{className:"text-2xl font-bold"},"Aucun sondage trouvé"),r.createElement("p",{className:"text-sm text-gray-500"},"Désolé, aucun sondage n'est disponible pour le moment."))}const rt=function(e){let{variant:t="default",className:a="",onClick:n,text:l,id:s,isActive:o=!1}=e;return r.createElement(C,{id:s,variant:t,onClick:n,className:d("text-white bg-contestio-purple border-2 border-contestio-purple rounded-lg shadow-md transition-all duration-300 text-center font-bold","hover:scale-95 hover:shadow-lg hover:bg-contestio-purple/90","active:bg-contestio-purple/70 active:shadow-sm",o&&"bg-contestio-purple/50 text-muted-foreground hover:scale-100",a)},l)},nt=function(e){let{datas:t,onClick:a,className:n,isActive:l=!1,variant:s="default"}=e;return r.createElement(r.Fragment,null,r.createElement("style",null,t.styles&&`#${t.slug} { ${t.styles} }`,t.hover&&`#${t.slug}:hover { ${t.hover} }`,t.focus&&`#${t.slug}:active { ${t.focus} }`),r.createElement(rt,{id:t.slug,text:t.text,onClick:a,className:n,isActive:l,variant:s}))};function lt(e){let{type:t,description:a,presignedUrl:n,button:l,className:s,title:o,onClick:c,badge:i}=e;return r.createElement(r.Fragment,null,r.createElement("div",{className:d("w-full h-full grid grid-cols-12 auto-rows-auto gap-4 items-center bg-white",s)},r.createElement("div",{className:d(n?"col-span-8":"col-span-12")},o&&r.createElement("div",{className:"mb-2 flex items-center gap-4"},r.createElement("h2",{className:"text-xl md:text-3xl font-bold"},o),i&&r.createElement("span",{className:"bg-contestio-purple w-fit text-white px-4 py-1 rounded-full text-md font-bold"},i)),r.createElement("div",{dangerouslySetInnerHTML:{__html:a},className:d("[&_p]:min-h-6","[&_a]:text-blue-500 [&_a]:underline","[&_ul]:list-disc [&_ul]:pl-10 [&_ul]:space-y-2","[&_ol]:list-decimal [&_ol]:pl-10 [&_ol]:space-y-2","[&_li]:min-h-6","[&_h2]:text-2xl [&_h2]:font-semibold [&_h2]:mb-1","[&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2","[&_strong]:font-bold","[&_em]:italic","[&_span]:font-medium")}),l&&r.createElement(nt,{datas:l,className:"mt-4",onClick:()=>c?.()})),n&&r.createElement("div",{className:"col-span-4"},r.createElement("img",{src:n,alt:"",className:"mx-auto w-5/6 h-auto object-cover rounded-xl shadow-md"}))),("homepage_header"===t||"banner"===t)&&r.createElement("div",{className:"col-span-12 w-3/5 mx-auto"},r.createElement(Xe,{className:"my-0 w-full"})))}function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},st.apply(null,arguments)}const ot=function(){const[e,t]=(0,r.useState)(!0),[a,n]=(0,r.useState)([]);(0,r.useEffect)((()=>{console.log("Surveys juste mounted"),l()}),[]);const l=async()=>{try{const{data:e}=await f("v1/surveys");n(e.filter((e=>"survey"===e.type)))}catch(e){console.error("Erreur de fetch:",e)}finally{t(!1)}};return e?r.createElement("section",{className:"flex flex-col items-center justify-center my-10 py-10 "},r.createElement(et,{withoutImage:!0})):r.createElement("section",{className:"flex flex-col items-center justify-center"},0===a.length?r.createElement(at,null):a.map((e=>r.createElement(lt,st({key:e._id},e,{button:e.buttonParticipate})))))};function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ct.apply(null,arguments)}const it=B.z.object({pseudo:B.z.string().min(2,{message:"Le pseudo doit contenir au moins 2 caractères."}).max(12,{message:"Le pseudo doit contenir moins de 12 caractères."}).regex(/^[a-zA-Z0-9_]+$/,{message:"Le pseudo ne peut contenir que des lettres, des chiffres et des underscores."})}),mt=function(){const{user:e,setUser:t}=v(),[a,n]=(0,r.useState)(!1),{watch:l,register:s,setValue:c,handleSubmit:i,formState:{errors:m}}=(0,q.mN)({resolver:(0,Z.u)(it),defaultValues:{pseudo:e?.pseudo||""}}),u=l("pseudo");return console.log(u),(0,r.useEffect)((()=>{c("pseudo",e?.pseudo||"")}),[e?.pseudo]),r.createElement("section",{className:"flex flex-col items-center justify-center"},r.createElement("form",{onSubmit:i((async()=>{try{n(!0),await g("pseudo",{pseudo:u}),t({...e,pseudo:u}),o.oR.success(`Bienvenue ${u} !`,{description:"Votre pseudo a bien été modifié."})}catch(e){e instanceof h.pe?o.oR.error(e?.response?.data?.message||"Une erreur est survenue lors de la modification de votre pseudo"):o.oR.error("Une erreur est survenue lors de la modification de votre pseudo")}finally{n(!1)}})),className:"flex flex-col gap-2 p-4 border border-border shadow-xl rounded-xl max-w-sm"},r.createElement("p",{className:"text-lg font-semibold"},"Modifier votre pseudo"),r.createElement("p",{className:"text-sm text-muted-foreground"},"Votre pseudo est unique et ne peut contenir que des lettres, des chiffres et des underscores."),r.createElement("div",{className:"mt-3 w-full max-w-sm items-center"},r.createElement(ke,ct({type:"text",id:"pseudo",autoComplete:"off",placeholder:"Votre pseudo",maxLength:12,disabled:a,className:d("border-2 border-contestio-purple/50 text-contestio-purple font-medium text-center text-lg !h-10","placeholder:text-contestio-purple/50",!!m.pseudo?.message&&"border-destructive",a&&"bg-contestio-purple/20")},s("pseudo"))),r.createElement("div",{className:"w-full flex justify-end items-center"},r.createElement("span",{className:"text-sm text-muted-foreground"},u?.length," / 12")),m.pseudo&&r.createElement("div",{className:"w-full text-center mt-1"},r.createElement("span",{className:"text-sm text-destructive font-semibold"},m.pseudo.message))),r.createElement("footer",{className:"mt-2 flex !flex-col gap-5 justify-center"},r.createElement(C,{type:"submit",disabled:a,className:"w-fit mx-auto flex items-center gap-2 p-4 text-md rounded-full"},"Valider",Y({icon:a?D.A:$e.A,className:"w-5 h-5 "+(a?"animate-spin":"")})))))};function dt(){return r.createElement("div",{className:"flex flex-col items-center justify-center h-full min-h-56 border rounded-xl p-4 mb-5 shadow-md"},r.createElement("h1",{className:"text-2xl font-bold"},"Aucun concours trouvé"),r.createElement("p",{className:"text-sm text-gray-500"},"Désolé, aucun concours n'a été trouvé pour le moment."))}var ut=a(5204);const pt=()=>{const{user:e}=v(),{setIsLoginOpen:t}=He(),{setIsPseudoOpen:a}=Ke();return()=>e&&e.firstName?e&&!e.pseudo?(a(!0),!0):!e||!e.pseudo:(t(!0),!0)};function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ft.apply(null,arguments)}const gt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",ft({ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",a)},n))}));gt.displayName="Card",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",ft({ref:t,className:d("flex flex-col space-y-1.5 p-6",a)},n))})).displayName="CardHeader",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("h3",ft({ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",a)},n))})).displayName="CardTitle",r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("p",ft({ref:t,className:d("text-sm text-muted-foreground",a)},n))})).displayName="CardDescription";const ht=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",ft({ref:t,className:d("p-3 md:p-6 pt-0 md:pt-0",a)},n))}));ht.displayName="CardContent";const xt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("div",ft({ref:t,className:d("flex items-center p-3 md:p-6 pt-0 md:pt-0",a)},n))}));function bt(){return r.createElement(r.Fragment,null,r.createElement("span",null),r.createElement(gt,{className:d("border-border/30 shadow-lg overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},r.createElement(ht,{className:"pt-5 relative"},r.createElement("div",{className:"overflow-hidden rounded-xl"},r.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/podium.svg",alt:"No participants",className:d("w-full h-auto aspect-square rounded-xl shadow object-contain","transition-transform duration-300 hover:scale-110")}))),r.createElement(xt,{className:"flex flex-col gap-0"},r.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},r.createElement("p",{className:"font-medium text-md"},"Aucune participation trouvée !")),r.createElement("p",{className:"w-full font-medium text-md text-muted-foreground"},"Soyez le premier à participer à ce concours !")),r.createElement("span",null)))}xt.displayName="CardFooter";var vt=a(12851),Et=a(69047),wt=a(14320);function Nt(e){let{loading:t,sort:a,sortBy:n,setSort:l,setSortBy:s,changeSort:o}=e;const[c,i]=(0,r.useState)(!1),[m,d]=(0,r.useState)(a.current||"asc"),[u,p]=(0,r.useState)(n.current||"likes");return r.createElement(ve,{open:c,onOpenChange:i},r.createElement(Ee,{variant:"ghost",className:"gap-2",disabled:t},"Trier par",Y({icon:Et.A,className:"w-4 h-4 md:w-5 md:h-5"})),r.createElement(we,{className:"md:max-w-sm"},r.createElement(Ne,null,r.createElement(Ce,null,"Trier par"),r.createElement(je,null,"Vous pouvez trier les participants par popularité ou par date de participation.")),r.createElement("div",{className:"flex flex-col gap-4 "},r.createElement("div",{className:"flex items-center gap-2"},r.createElement(ke,{type:"radio",id:"populars",name:"sortBy",value:"populars",className:"!w-4 h-4",defaultChecked:"likes"===n.current&&"desc"===a.current,onChange:()=>{p("likes"),d("desc")}}),r.createElement("label",{htmlFor:"populars",className:"flex items-center gap-2"},"Les plus populaires",Y({icon:wt.A,className:"w-5 h-5"}))),r.createElement("div",{className:"flex items-center gap-2"},r.createElement(ke,{type:"radio",id:"unpopulars",name:"sortBy",value:"unpopulars",className:"!w-4 h-4",defaultChecked:"likes"===n.current&&"asc"===a.current,onChange:()=>{p("likes"),d("asc")}}),r.createElement("label",{htmlFor:"unpopulars"},"Les moins populaires")),r.createElement("div",{className:"flex items-center gap-2"},r.createElement(ke,{type:"radio",id:"recents",name:"sortBy",value:"recents",className:"!w-4 h-4",defaultChecked:"createdAt"===n.current&&"desc"===a.current,onChange:()=>{p("createdAt"),d("desc")}}),r.createElement("label",{htmlFor:"recents",className:"flex items-center gap-2"},"Les plus récents")),r.createElement("div",{className:"flex items-center gap-2"},r.createElement(ke,{type:"radio",id:"oldest",name:"sortBy",value:"oldest",className:"!w-4 h-4",defaultChecked:"createdAt"===n.current&&"asc"===a.current,onChange:()=>{p("createdAt"),d("asc")}}),r.createElement("label",{htmlFor:"oldest"},"Les plus anciens"))),r.createElement(ye,null,r.createElement(C,{onClick:()=>{l(m),s(u),i(!1),o()},type:"button"},"Valider"))))}function yt(e){let{loading:t,participations:a,totalParticipations:n,search:l,setSearch:s,changeSort:o,sort:c,sortBy:i,setSort:m,setSortBy:d,resetSearch:u}=e;const p=(0,r.useRef)(0),f=(0,r.useRef)(null),g=(0,r.useRef)("");return(0,r.useEffect)((()=>{const e=Date.now();p.current=e,f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{e===p.current&&l!==g.current&&(g.current=l,o())}),800)}),[l,o]),r.createElement("div",{className:"w-full flex flex-col md:flex-row justify-between items-center gap-2 md:gap-5 my-3 md:my-10"},t&&0===a.length?r.createElement(O,{className:"hidden md:block w-40 h-10 rounded-xl"}):r.createElement("p",{className:"hidden md:block font-medium text-md text-muted-foreground"},n," participation",n>1&&"s"),r.createElement("div",{className:"mx-auto flex w-full md:w-2/5 items-center space-x-2 h-9 md:h-10"},r.createElement("div",{className:"relative w-full h-full"},r.createElement(ke,{type:"text",placeholder:"Rechercher un participant",className:"min-h-9 md:min-h-10 !h-full",value:l||"",maxLength:30,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&o()}}),l&&l.length>0&&r.createElement(C,{type:"button",variant:"link",className:"h-full aspect-square absolute right-0 top-0",onClick:u},Y({icon:J.A,className:"w-4 h-4 md:w-5 md:h-5"}))),r.createElement(C,{type:"submit",className:"m-2 h-full w-auto aspect-square bg-contestio-purple hover:bg-contestio-purple/90",disabled:t,onClick:o},Y({icon:t?D.A:vt.A,className:"w-5 h-5 "+(t?"animate-spin":"")}))),r.createElement("div",{className:"w-full md:w-fit flex flex-row justify-between items-center gap-2 md:gap-0"},t&&0===a.length?r.createElement(O,{className:"md:hidden w-32 h-6 rounded-xl"}):r.createElement("p",{className:"md:hidden w-full font-medium text-md text-muted-foreground"},n," participation",n>1&&"s"),r.createElement(Nt,{loading:t||0===a.length,sort:c,sortBy:i,setSort:m,setSortBy:d,changeSort:o})))}function Ct(){return r.createElement(gt,{className:d("border-border/30 shadow-lg cursor-pointer","hover:shadow-2xl hover:border-border transition-all duration-300")},r.createElement(ht,{className:"!pt-5"},r.createElement(O,{className:"w-full h-auto aspect-square rounded-xl"})),r.createElement(xt,{className:"flex flex-col gap-2"},r.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},r.createElement(O,{className:"w-44 h-5 rounded-xl"}),r.createElement(O,{className:"w-12 h-6 rounded-xl"})),r.createElement(O,{className:"w-full h-5 rounded-xl"})))}function jt(){return r.createElement(r.Fragment,null,r.createElement("span",null),r.createElement(gt,{className:d("border-border/30 shadow-lg overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},r.createElement(ht,{className:"pt-5 relative"},r.createElement("div",{className:"overflow-hidden rounded-xl"},r.createElement("img",{src:"/skin/frontend/base/default/reactjs-app/images/notFound.svg",alt:"Not found",className:d("w-full h-auto aspect-square rounded-xl shadow","transition-transform duration-300 hover:scale-110")}))),r.createElement(xt,{className:"flex flex-col gap-0"},r.createElement("div",{className:"w-full flex flex-row gap-5 justify-between items-center"},r.createElement("p",{className:"font-medium text-md"},"Aucun utilisateur trouvé !")),r.createElement("p",{className:"w-full font-medium text-md text-muted-foreground"},"Vérifiez que le pseudo est correct et essayez de nouveau...")),r.createElement("span",null)))}var Ot=a(22869),kt=a(78719);function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},St.apply(null,arguments)}const Pt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement("textarea",St({className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t},n))}));function Rt(e){let{onFileChange:t}=e;return xe("(max-width: 768px)")?r.createElement("div",{className:"w-full flex justify-center"},r.createElement("label",{htmlFor:"file-upload-mobile",className:"mt-2 inline-block bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition-colors"},"Choisir une image"),r.createElement("input",{id:"file-upload-mobile",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files?.[0];a&&t(a)},className:"hidden"})):r.createElement("div",{className:"mt-3 mb-5 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-gray-400 transition-colors",onDrop:e=>{e.preventDefault();const a=e.dataTransfer.files[0];a&&a.type.startsWith("image/")&&t(a)},onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("border-blue-500","bg-blue-50")},onDragLeave:e=>{e.currentTarget.classList.remove("border-blue-500","bg-blue-50")}},r.createElement("p",{className:"text-gray-500 mb-2"},"Glissez et déposez votre image ici"),r.createElement("p",{className:"text-sm text-gray-400"},"ou"),r.createElement("label",{htmlFor:"file-upload",className:"mt-2 inline-block bg-blue-500 text-white px-4 py-2 rounded cursor-pointer hover:bg-blue-600 transition-colors"},"Sélectionnez un fichier"),r.createElement("input",{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{const a=e.target.files?.[0];a&&t(a)},className:"hidden"}))}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},At.apply(null,arguments)}Pt.displayName="Textarea";const Lt=B.z.object({comment:B.z.string().max(255),terms:B.z.boolean().refine((e=>!0===e),{message:"Vous devez accepter les règles du concours"})});function _t(e){let{contestId:t,isOpen:a,setIsOpen:n,settlementUrl:l,setMyParticipation:s}=e;const c=(0,r.useRef)(null),[i,m]=(0,r.useState)(),[u,p]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[v,E]=(0,r.useState)(),{watch:w,reset:N,register:y,handleSubmit:j,formState:{errors:O}}=(0,q.mN)({resolver:(0,Z.u)(Lt)});(0,r.useEffect)((()=>{N(),p(""),E(void 0),b(!1),h(!1)}),[a]);const k=w("comment");return r.createElement(ve,{open:a,onOpenChange:n},r.createElement(we,{className:"md:w-[60vw] md:max-w-[800px]"},r.createElement(Ne,null,r.createElement(Ce,null,"Nouvelle participation"),r.createElement(je,null,"Vous pouvez participer au concours avec une photo de votre choix.")),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-10 auto-rows-auto gap-5"},r.createElement("div",{className:"md:col-span-4 flex flex-col gap-4 justify-center items-center"},r.createElement("div",{className:"w-full max-w-[400px] flex flex-col gap-4"},f&&r.createElement("div",{className:"h-32 md:h-56 flex flex-col gap-2 justify-center items-center border border-border shadow p-4 mx-3 md:mx-auto  rounded-md"},r.createElement("p",null,"Vérification de l'image"),Y({icon:D.A,className:"w-7 h-7 animate-spin text-contestio-purple"})),!f&&!u&&r.createElement(Rt,{onFileChange:async e=>{if(e){m(void 0);try{h(!0);const a=new FormData;a.append("file",e,e.name);const{data:r}=await g(`v1/participation/check-image/${t}`,a,{"Content-Type":"multipart/form-data"}),n=new Image;n.src="data:application/octet-stream;base64,"+r,n.onload=function(){p(n.src)},n.onerror=()=>{p(""),o.oR.error("Une erreur est survenue lors de la vérification de l'image")}}catch(e){console.error(e),o.oR.error("Une erreur est survenue lors de la vérification de l'image")}finally{h(!1)}}else p("")}}),!f&&!!u&&r.createElement("div",{className:"flex flex-col gap-2 justify-center items-center border border-border shadow pb-2 mx-3 md:mx-auto rounded-md"},r.createElement(Ot.Ay,{crop:i,onChange:(e,t)=>m(t),onComplete:e=>E(e),aspect:1,minHeight:100,className:"w-fit h-auto mx-auto mt-4 md:mt-0"},r.createElement("img",{ref:c,alt:"Crop me",src:u,className:"w-full h-full object-contain !max-h-[30vh] md:!max-w-[400px] md:!max-h-[400px]",onLoad:e=>{const{width:t,height:a}=e.currentTarget;var r,n;m((r=t,n=a,(0,Ot.ge)((0,Ot.dS)({unit:"%",width:90},1,r,n),r,n)))}})),r.createElement(C,{onClick:()=>p(""),variant:"outline",className:"w-fit gap-2"},"Changer d'image",Y({icon:J.A,className:"w-5 h-5"}))))),r.createElement("form",{className:"bg-white md:col-span-6 flex flex-col justify-around items-center gap-2 md:border border-border md:shadow p-3 md:p-5 rounded-md",onSubmit:j((async()=>{const e=await(async()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(!v)return console.error("No crop selected"),null;if(!c.current)return console.error("No image loaded"),null;if(!t)return console.error("Failed to get canvas context"),null;const a=c.current.naturalWidth/c.current.width,r=c.current.naturalHeight/c.current.height,n=window.devicePixelRatio;e.width=Math.floor(v.width*a*n),e.height=Math.floor(v.height*r*n),t.scale(n,n),t.imageSmoothingQuality="high";const l=v.x*a,s=v.y*r;return t.drawImage(c.current,l,s,v.width*a,v.height*r,0,0,v.width*a,v.height*r),new Promise((t=>{e.toBlob((e=>{t(e)}),"image/webp")}))})();if(e)try{b(!0);const a=new FormData;a.append("file",e,"image.webp");const{data:r,status:l}=await g(`v1/participation/upload-image/${t}`,a,{"Content-Type":"multipart/form-data"});if(200!==l&&201!==l)throw o.oR.error("Une erreur est survenue lors du téléchargement de votre image"),new Error("Failed to upload image");const{data:c}=await g(`v1/participation/${t}`,{imageUrl:r.Key,description:k});o.oR.success("Votre participation a bien été prise en compte"),n(!1),s(c)}catch(e){console.error(e)}finally{b(!1)}else o.oR.error("Ajoutez une image et sélectionnez la zone de recadrage.")}))},r.createElement("div",{className:"w-full flex flex-col gap-2 md:my-4"},r.createElement(Pt,At({placeholder:"Ajouter une description (facultatif)",maxLength:200,className:"max-h-40"},y("comment"))),r.createElement("p",{className:"text-sm text-muted-foreground ml-auto"},k?.length||0," / 200")),r.createElement("div",{className:"flex items-center justify-center gap-2"},r.createElement("input",At({type:"checkbox",id:"terms"},y("terms"),{className:d("peer",O.terms&&"border-destructive text-destructive")})),r.createElement("label",{htmlFor:"terms",className:d("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",O.terms&&"text-destructive")},"J'ai lu et j'accepte"," ",r.createElement("a",{href:l,target:"_blank",className:"underline",rel:"noreferrer"},"les règles du concours"),".")),r.createElement(C,{type:"submit",className:"mt-4 w-full gap-2",disabled:x},"Participer au concours"," ",Y({icon:x?D.A:kt.A,className:"w-5 h-5 "+(x?"animate-spin":"")}))))))}var zt=a(75779),Mt=a(78541),Ut=a(73072),It=a(3118),Ft=a(21749),$t=a(26777),Vt=a(11813),Tt=a(32892);function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Bt.apply(null,arguments)}const qt=$t.bL,Dt=($t.YJ,$t.WT),Ht=r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement($t.l9,Bt({ref:t,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},l),n,r.createElement($t.In,{asChild:!0},Y({icon:Vt.A,className:"h-4 w-4 opacity-50"})))}));Ht.displayName=$t.l9.displayName;const Zt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement($t.PP,Bt({ref:t,className:d("flex cursor-default items-center justify-center py-1",a)},n),Y({icon:Tt.A,className:"h-4 w-4"}))}));Zt.displayName=$t.PP.displayName;const Jt=r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement($t.wn,Bt({ref:t,className:d("flex cursor-default items-center justify-center py-1",a)},n),Y({icon:Vt.A,className:"h-4 w-4"}))}));Jt.displayName=$t.wn.displayName;const Kt=r.forwardRef(((e,t)=>{let{className:a,children:n,position:l="popper",...s}=e;return r.createElement($t.ZL,null,r.createElement($t.UC,Bt({ref:t,className:d("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l},s),r.createElement(Zt,null),r.createElement($t.LM,{className:d("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},n),r.createElement(Jt,null)))}));Kt.displayName=$t.UC.displayName,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement($t.JU,Bt({ref:t,className:d("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},n))})).displayName=$t.JU.displayName;const Wt=r.forwardRef(((e,t)=>{let{className:a,children:n,...l}=e;return r.createElement($t.q7,Bt({ref:t,className:d("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-contestio-purple/10",a)},l),r.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},r.createElement($t.VF,null,Y({icon:kt.A,className:"h-4 w-4"}))),r.createElement($t.p4,null,n))}));Wt.displayName=$t.q7.displayName,r.forwardRef(((e,t)=>{let{className:a,...n}=e;return r.createElement($t.wv,Bt({ref:t,className:d("-mx-1 my-1 h-px bg-muted",a)},n))})).displayName=$t.wv.displayName;const Yt=["Contenu inapproprié","Publicité ou spam","Discours haineux","Usurpation d’identité","Autre"];function Qt(e){let{pseudo:t,_id:a}=e;const[n,l]=(0,r.useState)(!1),[s,c]=(0,r.useState)(null),[i,m]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{n||(c(null),m(null),u(!1),b(!1),f(!1))}),[n]),(0,r.useEffect)((()=>{s?Yt.includes(s)&&"Autre"!==s?u(!0):u(!("Autre"!==s||!i)):u(!1)}),[s,i]),r.createElement(ve,{open:n,onOpenChange:l},r.createElement(M,null,r.createElement(U,{className:"ml-auto",asChild:!0},r.createElement(Ee,{variant:"ghost-destructive",className:"w-10 h-10 p-0 text-black hover:text-destructive transition-all duration-300"},Y({icon:Ft.A,fill:"black",className:"w-6 h-6 "}))),r.createElement(I,{className:"bg-white text-black"},r.createElement("p",null,"Signaler"))),r.createElement(we,null,r.createElement(Ne,null,r.createElement(Ce,null,"Signaler"),r.createElement(je,null,"Vous êtes sur le point de signaler la participation de"," ",r.createElement("strong",null,t),".")),r.createElement("div",{className:"flex flex-col gap-4"},r.createElement("p",null,"Sélectionnez le motif de votre signalement :"),r.createElement(qt,{onValueChange:e=>c(e)},r.createElement(Ht,null,r.createElement(Dt,{placeholder:"Motif"})),r.createElement(Kt,null,Yt.map((e=>r.createElement(Wt,{key:e,value:e,className:"font-normal text-md"},e))))),"Autre"===s&&r.createElement("div",{className:"flex flex-col gap-2"},r.createElement(Pt,{className:"max-h-40",onChange:e=>m(e.target.value),placeholder:"Ajoutez un commentaire",maxLength:255},i),r.createElement("p",{className:"text-sm text-muted-foreground ml-auto"},i?.length||0," / 255"))),r.createElement(ye,null,r.createElement(C,{onClick:()=>l(!1),variant:"outline"},"Annuler"),r.createElement(C,{onClick:async()=>{if(d&&!p){f(!0);try{await g(`v1/participation/flag/${a}`,{description:"Autre"===s?i:s}),o.oR.success("Signalement envoyé avec succès !",{description:"Merci pour votre contribution à l'équité du concours."}),l(!1)}catch(e){e instanceof h.pe?o.oR.error(e.response?.data.message||"Une erreur est survenue"):(console.error(e),o.oR.error("Une erreur est survenue lors du signalement."))}finally{f(!1)}}},disabled:!d||p||x,variant:"destructive",className:"flex items-center gap-2"},x?"Signalement envoyé":"Signaler",Y({icon:x?kt.A:p?D.A:Ft.A,className:"size-4 "+(p?"animate-spin":"")})))))}function Gt(e){let{image:t,name:a,url:n,type:l="share",isRounded:s=!1,setReportOpen:c}=e;return r.createElement(M,null,r.createElement(U,{className:"report"===l?"ml-auto":"",asChild:!0},r.createElement(C,{variant:"report"===l?"ghost-destructive":"ghost",className:d("w-10 h-10 p-0","report"===l&&"text-black hover:text-destructive transition-all duration-300"),onClick:()=>{"share"===l?console.log("share",n):"copy"===l?(navigator.clipboard.writeText(n),o.oR.success("Lien copié avec succès !")):"report"===l&&c&&c(!0)}},"string"==typeof t?r.createElement("img",{src:t,alt:a||l,className:d("w-6 h-6",s?"rounded-full":"rounded-md")}):Y({icon:t,fill:"black",className:"w-6 h-6 "}))),r.createElement(I,{className:"bg-white text-black"},"share"===l?r.createElement("p",null,"Partager sur ",r.createElement("strong",null,a)):"copy"===l?r.createElement("p",null,"Copier le lien"):"report"===l&&r.createElement("p",null,"Signaler")))}var Xt=a(64184),ea=a(66822);function ta(e){let{open:t,setOpen:a,contestId:n,setMyParticipation:l,setEditModal:s}=e;const[c,i]=(0,r.useState)(!1);return r.createElement(ve,{open:t,onOpenChange:e=>{a(e),s(!e)}},r.createElement(we,{className:"md:max-w-sm"},r.createElement(Ne,null,r.createElement(Ce,null,"Suppression de la participation"),r.createElement(je,null,"Vous êtes sur le point de supprimer votre participation. Cette action est ",r.createElement("strong",null,"irréversible"),".")),r.createElement(ye,null,r.createElement(C,{type:"button",variant:"outline",onClick:()=>{a(!1),s(!0)},disabled:c,className:"gap-2"},"Annuler"),r.createElement(C,{variant:"destructive",onClick:async()=>{if(!c){i(!0);try{await(async e=>await u.A.delete(p+e))(`v1/participation/${n}`),l?.(null),o.oR.success("Votre participation a bien été supprimée."),a(!1),s(!1)}catch(e){e instanceof Error?"Not found"===e.message&&(o.oR.error("Cette participation n'existe pas."),a(!1),s(!0)):(console.error(e),o.oR.error("Une erreur est survenue lors de la suppression."))}finally{i(!1)}}},disabled:c,className:"gap-2"},"Supprimer",Y({icon:c?D.A:ea.A,className:"w-5 h-5 "+(c?"animate-spin":"")})))))}function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},aa.apply(null,arguments)}const ra=B.z.object({comment:B.z.string().max(200,"La description ne peut pas faire plus de 200 caractères.")});function na(e){let{part:t,contestId:a,contestEnded:n,setMyParticipation:l}=e;const[s,c]=(0,r.useState)(!1),[i,m]=(0,r.useState)(!1),[d,f]=(0,r.useState)(!1),{watch:g,register:h,handleSubmit:x,reset:b,formState:{errors:v}}=(0,q.mN)({resolver:(0,Z.u)(ra),defaultValues:{comment:t.description||""}}),E=g("comment");return(0,r.useEffect)((()=>{i||(c(!1),b())}),[i]),r.createElement(r.Fragment,null,r.createElement(ve,{open:i,onOpenChange:m},r.createElement(Ee,{className:"gap-2 w-full rounded-full",disabled:s||n},n?"Terminé":r.createElement(r.Fragment,null,"Modifier ",Y({icon:Xt.A,className:"w-5 h-5"}))),r.createElement(we,{className:"md:max-w-sm"},r.createElement(Ne,null,r.createElement(Ce,null,"Modifier la participation"),r.createElement(je,null,"Vous pouvez ",r.createElement("strong",null,"supprimer")," ou"," ",r.createElement("strong",null,"modifier la description")," de votre participation à tout moment.")),r.createElement("form",{className:"flex flex-col items-center gap-2 ",onSubmit:x((async()=>{if(!s){c(!0);try{await(async(e,t)=>await u.A.patch(p+e,t))(`v1/participation/${a}`,{description:E}),l?.({...t,description:E}),o.oR.success("Participation modifiée avec succès"),m(!1)}catch(e){e instanceof Error?"Not found"===e.message&&(o.oR.error("Cette participation n'existe pas."),m(!1)):(console.error(e),o.oR.error("Une erreur est survenue lors de la modification."))}finally{c(!1)}}}))},r.createElement("div",{className:"w-full flex flex-col gap-2 my-4"},r.createElement(Pt,aa({placeholder:"Ajouter une description (facultatif)",maxLength:200,className:"max-h-40"},h("comment"))),r.createElement("p",{className:"text-sm text-muted-foreground ml-auto"},E?.length||0," / 200"),v.comment&&r.createElement("p",{className:"text-sm text-destructive text-center"},v.comment.message)),r.createElement(C,{type:"button",variant:"destructive",className:"w-full gap-2",onClick:()=>{m(!1),f(!0)}},"Supprimer la participation",Y({icon:ea.A,className:"w-5 h-5"})),r.createElement(C,{type:"submit",className:"mt-4 w-full gap-2",disabled:s},"Modifier la participation"," ",Y({icon:s?D.A:Xt.A,className:"w-5 h-5 "+(s?"animate-spin":"")}))))),r.createElement(ta,{open:d,setOpen:f,contestId:a,setMyParticipation:l,setEditModal:m}))}function la(e){let{part:t,contestEnded:a,votedToday:n=!1,isMyParticipation:l=!1,contestId:s,setMyParticipation:c}=e;const i=pt(),[m,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),x=`${window.location.href.replace(/\?.*$/,"")}?ctst-u=${t.pseudo}`,b=encodeURIComponent(x),v=!1===t.isActive&&!!t.moderationStatus,E=t.liked||!0===n||m||a||v;return r.createElement("div",{className:d("my-5 md:my-0 mx-auto grid grid-cols-1 md:grid-cols-2 gap-5 items-center auto-rows-auto after:content-none max-w-full md:max-w-[50vw]",l&&"border border-border shadow-md rounded-xl py-5 px-7",v&&"relative")},r.createElement("img",{src:t.presignedUrl||"",alt:t.pseudo||"Image",className:d("mx-auto w-2/3 md:w-full h-auto aspect-square rounded-xl shadow-xl","transition-transform duration-300 hover:scale-110")}),r.createElement("div",{className:"w-full h-full px-4 flex flex-col justify-between"},r.createElement("p",{className:"font-medium text-lg text-center"},l?"Ma participation : ":"Participation de ",r.createElement("span",{className:"font-bold"},t.pseudo||"")),r.createElement("p",{className:"text-muted-foreground text-sm text-center p-4 border border-border/60 rounded-md my-5 break-words"},t.description||r.createElement("span",{className:"italic"},"Aucune description ajoutée.")),r.createElement("div",{className:"my-5 mx-auto w-2/3 flex flex-col gap-5 items-center justify-between"},r.createElement("div",{className:"w-full flex flex-row gap-1 items-center justify-between"},r.createElement("div",{className:"flex flex-row gap-2 items-center"},Y({icon:zt.A,filledRed:t.liked||l,className:`w-5 h-5 ${(t.liked||l)&&"text-red-500"}`}),t.likes||0),r.createElement("div",{className:"flex flex-row gap-2 items-center"},t.rank||0," ",1===t.rank?"er":"ème",Y({icon:1===t.rank?Mt.A:Ut.A,className:"w-5 h-5 "+(1===t.rank?"text-yellow-400":"text-muted-foreground")}))),l&&s&&!v?r.createElement(na,{contestId:s,part:t,setMyParticipation:c,contestEnded:a}):r.createElement(C,{className:"w-full rounded-full gap-2 relative",disabled:E||m,onClick:()=>{i()||(async()=>{u(!0);try{await g(`v1/participation/like/${t._id}`,{}),t.likes=t.likes+1,t.liked=!0,o.oR.success("Vote ajouté avec succès !"),f(!0)}catch(e){e instanceof h.pe?o.oR.error(e.response?.data.message||"Une erreur est survenue"):(console.error(e),o.oR.error("Une erreur est survenue lors de l'ajout du vote."))}finally{u(!1)}})()}},t.liked?"Vote ajouté":n?"Déjà voté aujourd'hui":a?"Terminé":"Voter",p&&r.createElement("div",{className:"absolute top-0 left-0 w-full h-10 flex items-center justify-center"},r.createElement(Ve.A,{zIndex:50,force:.4,particleCount:30,width:300,onComplete:()=>f(!1)})),Y({icon:m?D.A:zt.A,fill:"white",className:`w-5 h-5 text-white ${!1===E&&"animate-hi-there"} ${m&&"animate-spin"}`}))),r.createElement("footer",null,r.createElement("div",null,r.createElement("p",{className:"w-full font-light text-sm text-muted-foreground"},"Partager sur :"),r.createElement("div",null,r.createElement("div",{className:"flex flex-row gap-2 items-center"},Gt({image:"/skin/frontend/base/default/reactjs-app/images/facebook.png",name:"Facebook",url:`https://www.facebook.com/sharer/sharer.php?u=${b}`,type:"share"}),Gt({image:"/skin/frontend/base/default/reactjs-app/images/twitter.webp",name:"Twitter",url:`https://twitter.com/intent/tweet?url=${b}`,type:"share",isRounded:!0}),Gt({image:"/skin/frontend/base/default/reactjs-app/images/messenger.png",name:"Messenger",url:`https://www.messenger.com/send?text=${b}`,type:"share"}),Gt({image:It.A,url:x,type:"copy"}),!l&&!a&&r.createElement(Qt,{pseudo:t.pseudo,_id:t._id})))))),v&&r.createElement("div",{className:"absolute inset-0 bg-white/80 z-50 flex items-center justify-center rounded-xl backdrop-blur"},r.createElement("div",{className:"bg-white border rounded-xl shadow w-3/4 p-5"},r.createElement("h1",{className:"text-xl font-bold mb-2"},"Modération"),r.createElement("p",null,"Cette participation est en cours de modération ou a été supprimée."),r.createElement("p",{className:"mt-4 border p-2 rounded-xl w-full text-center"},t.moderationStatus))))}function sa(){return r.createElement("div",{className:"flex flex-col items-start justify-center w-full border border-contestio-purple/80 rounded-xl p-4 mb-5 shadow-md shadow-contestio-purple/20"},r.createElement("h1",{className:"text-xl text-black font-semibold flex items-center gap-2 mb-2"},"Concours terminé",Y({icon:Mt.A,className:"w-4 h-4"})),r.createElement("p",{className:"text-sm text-gray-500"},"Le concours est terminé. Vous ne pouvez plus voter ni modifier votre participation mais vous pouvez toujours voir les participations."))}function oa(e){let{part:t,onItemClick:a}=e;return r.createElement(gt,{onClick:()=>a(t),className:d("border-border/30 shadow-lg cursor-pointer overflow-hidden","hover:shadow-2xl hover:border-border transition-all duration-300")},r.createElement(ht,{className:"pt-3 md:pt-5 relative"},r.createElement("div",{className:"overflow-hidden rounded-xl"},r.createElement("img",{src:t.presignedUrl||"",alt:t.pseudo||"Image",className:d("w-full h-auto aspect-square rounded-xl shadow","transition-transform duration-300 hover:scale-110")}),t.rank<4&&r.createElement("span",{className:"absolute top-2 md:top-4 right-2 md:right-4 bg-contestio-purple text-white px-4 py-1 rounded-full text-sm font-semibold"},t.rank,1===t.rank?"er":" ème"))),r.createElement(xt,{className:"flex flex-col gap-0 pt-0"},r.createElement("div",{className:"w-full flex flex-row gap-2 justify-between items-center"},r.createElement("p",{className:"font-medium text-md truncate flex-grow"},t.pseudo||""),r.createElement("div",{className:"flex flex-row gap-1 items-center flex-shrink-0"},Y({icon:zt.A,fill:t.liked?"red-500":"transparent",filledRed:t.liked,className:`w-5 h-5 ${t.liked&&"text-red-500"}`}),t.likes||0)),r.createElement("p",{className:"w-full h-6 line-clamp-1 break-all text-ellipsis font-medium text-md text-muted-foreground"},t.description||"")))}const ca=r.memo((e=>{let{participations:t,onItemClick:a}=e;return r.createElement(r.Fragment,null,t.map((e=>r.createElement(oa,{key:e._id,part:e,onItemClick:a}))))}));ca.displayName="PartsList";const ia=ca;function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ma.apply(null,arguments)}function da(e){let{contestsLoading:t,contestEnded:a,myParticipation:n,setMyParticipation:s}=e;const o=pt(),{user:c,contestsContent:i}=v(),[m]=(0,l.ok)(),d=(0,r.useRef)(m.get("ctst-q")),u=(0,r.useRef)(m.get("ctst-u")),p=(0,r.useRef)(1),g=(0,r.useRef)("desc"),h=(0,r.useRef)("likes"),[x,b]=(0,r.useState)(u.current?u.current:d.current||""),[E,w]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!0),[j,O]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[P,R]=(0,r.useState)([]),[A,L]=(0,r.useState)({limit:0,page:0,totalPages:0,totalParticipations:0});(0,r.useEffect)((()=>{U()}),[i]),(0,r.useEffect)((()=>{u.current=m.get("ctst-u")}),[m.get("ctst-u")]),(0,r.useEffect)((()=>{if(!N)if(d.current=x,x.length>0){const e=new URL(window.location.href);e.searchParams.set("ctst-q",x),window.history.pushState({path:e.href},"",e.href)}else _()}),[x]),(0,r.useEffect)((()=>{if(k&&j){const e=new URL(window.location.href);e.searchParams.set("ctst-u",j?.pseudo),window.history.replaceState({path:e.href},"",e.href)}else{const e=new URL(window.location.href);e.searchParams.delete("ctst-u"),window.history.replaceState({path:e.href},"",e.href)}}),[k,j]);const _=()=>{const e=new URL(window.location.href);e.searchParams.delete("ctst-q"),e.searchParams.delete("ctst-u"),window.history.pushState({path:e.href},"",e.href)},z=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y(!0),p.current=1,R([]);const t=await M(i?.contest?.slug||"",e);R(t||[])},M=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];y(!0);try{const{data:a}=await f(`v1/contests/${e}/${h.current}/${g.current}/${p.current}?search=${t?"":x}`);return L({limit:a.limit||0,page:a.page||0,totalPages:a.totalPages||0,totalParticipations:a.totalParticipations||0}),a.participations||[]}catch(e){console.error("Erreur de fetch:",e)}finally{y(!1)}},U=async()=>{if(!i?.contest?.slug)return;const e=(await M(i?.contest?.slug||"")).filter((e=>!P.some((t=>t._id===e._id))));R([...P,...e]||[])};return r.createElement(r.Fragment,null,t&&r.createElement("div",{className:"w-full flex flex-col gap-20 my-20"},r.createElement(et,{withoutImage:!0,withoutButton:!0})),!t&&i?.contest&&r.createElement("div",{className:"w-full flex flex-col gap-20 mb-10"},r.createElement(lt,ma({},a&&{badge:"Terminé"},{type:i.contest.type,title:i.contest.name,description:i.contest.description,button:n||a?void 0:i.contest.buttonParticipate,onClick:()=>{o()||w(!0)}}))),a&&r.createElement(sa,null),n&&r.createElement("div",{className:"mb-5"},r.createElement(la,{isMyParticipation:!0,part:n,setMyParticipation:s,contestEnded:a,contestId:i?.contest?._id||void 0})),r.createElement(_t,{contestId:i?.contest?._id||"",settlementUrl:i?.contest?.settlement||"",isOpen:E,setIsOpen:w,setMyParticipation:s}),r.createElement(yt,{loading:N,participations:P,totalParticipations:A.totalParticipations,search:x,setSearch:e=>{b(e)},changeSort:z,sort:g,sortBy:h,setSort:e=>{g.current=e},setSortBy:e=>{h.current=e},resetSearch:()=>{b(""),_(),d.current="",u.current="",z(!0)}}),r.createElement("div",{className:"w-full grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-10 after:content-none"},N&&0===P?.length?r.createElement(r.Fragment,null,r.createElement(Ct,null),r.createElement(Ct,null),r.createElement(Ct,null),r.createElement(Ct,null),r.createElement(Ct,null),r.createElement(Ct,null)):r.createElement(ia,{participations:P,onItemClick:e=>{O(e),S(!0)}}),r.createElement(ve,{open:k,onOpenChange:S},r.createElement(we,{className:"max-w-[700px]"},r.createElement(Ne,{className:"hidden"},r.createElement(Ce,null,"Participation de ",j?.pseudo||"nc"),r.createElement(je,null,j?.description||"Aucune description")),j?r.createElement(la,{part:j,votedToday:i?.votedToday||!1,contestEnded:a}):r.createElement("p",null,"Cette participation n'existe pas."))),N||0!==P?.length?null:x.length>0?r.createElement(jt,null):r.createElement(bt,null),N&&r.createElement(r.Fragment,null,[...Array(A.limit||3)].map(((e,t)=>r.createElement(Ct,{key:t}))))),A.totalPages>1&&p.current<A.totalPages&&r.createElement(C,{variant:"ghost",disabled:N,onClick:()=>{o()||(p.current+=1,U())},className:"flex items-center gap-2 mt-10"},c?.firstName?"Voir plus":"Connectez-vous pour en voir plus",Y(N?{icon:D.A,className:"size-5 animate-spin"}:{icon:ut.A,className:"size-5"})))}const ua=function(){const{contestsLoading:e,setContestsLoading:t,contestsContent:a,setContestsContent:n}=v(),[l,s]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[m,d]=(0,r.useState)(null);(0,r.useEffect)((()=>{console.log("Contest juste mounted"),e&&u()}),[]);const u=async()=>{try{const{data:e}=await f("v1/contests/metadatas");n(e),d(e.myParticipation),e.contest?s(!1):(s(!0),i(!!a?.contest?.ended))}catch(e){console.error("Erreur de fetch:",e)}finally{t(!1)}};return r.createElement("section",{className:"flex flex-col items-center justify-center"},r.createElement(c.mg,null,r.createElement("meta",{property:"og:title",content:`Concours ${a?.contest?.name}`}),r.createElement("meta",{property:"og:description",content:a?.contest?.description}),r.createElement("meta",{property:"og:image",content:a?.banner?.presignedUrl})),!e&&l?r.createElement(dt,null):r.createElement(da,{contestsLoading:e,contestEnded:o,myParticipation:m,setMyParticipation:d}))},pa=function(){const e=window.location.href.includes("contestio")?"/index.php/contestio":"/";return r.createElement(l.Kd,{basename:e},r.createElement(b,null,r.createElement(o.l$,null),r.createElement(c.vd,null,r.createElement(z,null,r.createElement(Ze,null,r.createElement(We,null,r.createElement(s.BV,null,r.createElement(s.qh,{element:r.createElement(Ye,null)},r.createElement(s.qh,{path:"/contests",element:r.createElement(ua,null)}),r.createElement(s.qh,{path:"/surveys",element:r.createElement(ot,null)}),r.createElement(s.qh,{path:"/profile",element:r.createElement(mt,null)}),r.createElement(s.qh,{path:"/",element:r.createElement(tt,null)})))))))))};n.createRoot(document.getElementById("root")).render(r.createElement(r.StrictMode,null,r.createElement(pa,null)))}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(a.exports,a,a.exports,l),a.loaded=!0,a.exports}l.m=r,e=[],l.O=(t,a,r,n)=>{if(!a){var s=1/0;for(m=0;m<e.length;m++){a=e[m][0],r=e[m][1],n=e[m][2];for(var o=!0,c=0;c<a.length;c++)(!1&n||s>=n)&&Object.keys(l.O).every((e=>l.O[e](a[c])))?a.splice(c--,1):(o=!1,n<s&&(s=n));if(o){e.splice(m--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[a,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var s={};t=t||[null,a({}),a([]),a(a)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=a(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,l.d(n,s),n},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={792:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,s=a[0],o=a[1],c=a[2],i=0;if(s.some((t=>0!==e[t]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(c)var m=c(l)}for(t&&t(a);i<s.length;i++)n=s[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(m)},a=self.webpackChunkcontestio=self.webpackChunkcontestio||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),l.nc=void 0,l.O(void 0,[96],(()=>l(84315))),l.O(void 0,[96],(()=>l(7452)));var s=l.O(void 0,[96],(()=>l(35412)));s=l.O(s)})();